<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>A generic model to optimise urban metabolism</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="/home/tr608/.pandoc/marked/kultiad-serif.css">
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<header>

<h1 class="title">A generic model to optimise urban metabolism</h1>


<h2 class="author">Tom Ravalde</h2>
<p class="affilation"><em></em></p>
<h2 class="author">James Keirstead</h2>
<p class="affilation"><em></em></p>

</header>


<p class="small"><strong>Abstract: </strong><em>Cities have proved successful at increasing the quality of life enjoyed by a growing global population. However, they have not yet realised their potential to meet the needs or a population with more effecient resource management. Specifically, the dense nature of cities should enable the wastes and by-products of one process to be used as inputs to another, thus a level of demand for goods and services can be met, but with reduced resource consumption and waste output.<br />One way that planners help to design resource management systems is to use optimisation modelling, which can help choose the processes, infrastructure, and operation schedules which meet demand subject to some minimum cost (financial, environmental, or other). While many models exist within individual resource sectors (e.g. energy supply or water distribution), our systematic and detailed survey of the literature shows that there are no models which consider multiple sectors in combination. In this paper, we formulate a model which simultaneously considers energy, water and waste management, such that cities may realise the resource-saving benefits of synergies in integrated resource management. We demonstrate the model via application to a new Chinese urban development. Our results show that...</em></p>




<h1 id="scratchpad" class="unnumbered">Scratchpad</h1>
<ul>
<li>New version: based on James' unpublished 'A Generic MILP Model for the Design of Urban Energy Systems'</li>
<li>use: scenario analysis includes sensitivity analysis</li>
<li>use: strategic planning can include policy, decision-making support</li>
<li>use: system improvements can include problem identification (troubleshooting)</li>
<li>TODO: try generating separate PNG and PDF figures, for HTML and PDF document outputs, respectively (another time!)</li>
</ul>
<h1 id="introduction">Introduction</h1>
<p>Cities have proved key to humanity's success, by making a high quality of life possible for billions of people through the efficient provision of goods and services <span class="citation">(WorldBank 2004)</span>. However, to sustain their populations, cities consume large quantities of energy and water, and generate significant waste. This leads to environmental challenges such as water stress, global warming and land-use constraints [TODO: references]. As such, efforts are being devoted to reducing a city's resource consumption and waste output, in order to improve urban sustainability.</p>
<p>The management of urban resources requires networks of infrastructure to convert and transport resources to and thus efforts to improve sustainability often involve improving the design and operation of these infrastructure networks. One approach taken to such improvements is that of optimisation modelling, in which a resource allocation problem is represented by sets of equations which are then solved to select an optimal mix, layout, and operation schedule for resource management infrastructure [TODO: reference], such as water pipes [TODO: reference], waste transportation [TODO: reference], and power plants [TODO: reference].</p>
<p>However, as our literature review will show, urban resource optimisation modelling usually considers only one resource sector in isolation (e.g. an urban energy system). This approach fails to take advantage of the co-location of various resource management infrastructure, which makes possible synergies between different systems [TODO: reference], where the wastes and by-products of one process become the inputs to another (as seen in an energy-from-waste plant, for example). Thus current approaches to designing urban resource management systems impose a ceiling on potential material and energy savings.</p>
<p>Considering sustainable urban resource management from another angle, we turn to the urban metabolism (UM) framework, which was introduced by <span class="citation">Wolman (1965)</span> as &quot;all the material and commodities needed to sustain a city's inhabitants at home, at work and at play&quot; (p156). This concept has given rise to numerous studies which seek to understand the scale and origins of urban consumption/waste, and its relationship to an area's form, geography, and other characteristics. Consequently, the UM concept has provided tools which help planners and policy makers improve urban sustainability (see for example the report for the UK Government by <span class="citation">Clift et al. (2015)</span>).</p>
<p>In this paper, we formulate an optimisation model which meets demands for energy, water and waste management in such a way that it considers the potential synergies between these sectors, and thereby provide another UM-based tool which can help to improve the metabolism of a city. We proceed by reviewing current modelling approaches within UM and resource optimisation more generally, before formulating the model and demonstrating it on a Chinese urban development.</p>
<h1 id="literature-review">Literature review</h1>
<p>The first part of our literature review attempts to locate our intersectoral optimisation model within the existing set or UM modelling and thus demonstrate its contribution advancing the field. In the second part of our review, we research resource optimisation models to identify a method for our own model.</p>
<h2 id="um-review">UM review</h2>
<p>[TODO: Introductory paragraph (e.g. Kennedy definition?)] Urban metaboilsm is a broad area of study, and includes</p>
<p>its basic function is to highlight how cities can sustain their developing forms and socioeconomic functions, but with less harmful resource (forms, functions and flows). <span class="citation">Zhang (2013)</span>'s review mainly focuses on the flows (&quot;research on urban metabolism therefore focuses on the sources and consumption of resources, and on their cycling within the system plus the emission, treatment, and recycling of wastes&quot;).</p>
<!--
Studies of an area's metabolism can take a number of forms, focussing on the different elements of an urban system summarized by @Ravalde2016's hierarchical representation illustrated in Figure \ref{fig:metab}. Resource demand and waste generation at the bottom drives aggregate resource exchanges between a city and the environment at the top. In the middle, are the processes which convert and transport resources. We can use this representation, along with the 'top', 'middle' and 'bottom' terminology to outline the types of UM modelling that exist.

- Some work provides **top of system understanding** in the form of **accounting** exercises to quantify a city's resource flows at the top. The results of these can be used to to compare between cities(these results can also be used to calculate carbon footprint, ecological footprint and other metrics). [TODO: as in REFERENCE]. Or they can be used to related to other variables of interest [TODO: reference: e.g. water levels in Toronto]
- Elsewhere, UM studies seek to provide **top-bottom system understanding**, by relating such resource flows (or stocks) at the top to aspects of a city, building from the bottom up.
    - @Ye2011: deterministically relates household construction characteristics to greenhouse gas emissions.
    - @Kellet2013 builds up emissions from building, transport, human, and vegetation sources.
    - @Baynes2012a: sectoral energy demand and upstream energy consumption
- Elsewhere, UM studies seek to provide **top-city system understanding**, by relating such resource flows (or stocks) at the top to aspects of a city such as resource flows at the top to socioecnomics, geography, urban form, etc. [TODO: add reference]. These could then be used to carry out scenario analysis, strategic planning
    - @Liang214: statistically relates a city's quantity of steel stock with levels of nightime lighting
    - @Fischer-Kowalski2004: society size and transport volume
    - @Fung2005: relates sustainability to instituational activities
    - @Hung2005: relates energy flows to urban development
    - @Newman1999a: (theoretically) relates resource flows to urban form and 'livability'. 
- Elsewhere, UM studies seek to provide more **top-middle system understanding**, by relating such resource flows (or stocks) at the networks of processes in the middle (e.g. ENA) [TODO: add reference]. These could then be used to inform interventions, scenario analysis, strategic planning
    - @Zhang2010: ENA to related resource flows of a city's 17 economic sectors to each other
- **middle-bottom system understanding**
    - @Zeng2014: simulate water flows between the processes (e.g. water reclamation) and demands in an urban system, to show how demands under changing population scenarios
    - Similarly @Liang2011 resource consumption and waste emission objectives -- [TODO: leave, for now]
- Other (e.g. theory)

In coming to an understanding of **-middle** systems, some models choose to unite all resource flows under a single measures, such as @HUang2005 who use emergy. Others 
-->

<p>The evolution of UM research has been summarised by <span class="citation">Zhang (2013)</span>. Starting with Wolman's seminal study, a city was understood as a system into and out of which resources flowed in a linear fashion. On this view, sustainability efforts are focussed on minimising the inputs and outputs. This representation was refined by <span class="citation">(<span class="citeproc-not-found" data-reference-id="Giradet1990"><strong>???</strong></span>)</span>, who suggested that in addition to minimising resource inputs (e.g. by using solar energy and more efficient energy processes such as CHP), cities should be adopting circular metabolisms, whereby outputs could be reused as inputs through waste recycling. Both of these are black-box representations, where there is no consideration of mechanisms at play within the city. Thus <span class="citation">Zhang, Yang, and Yu (2009)</span> proposed a network-process model in which research considers how resources move within a system. Specifically that work (and its offspring, such as <span class="citation">(<span class="citeproc-not-found" data-reference-id="Li2011"><strong>???</strong></span>)</span>) considers the economic sectors (nodes) within a system, and the degree to which they are dependent upon one another by resource flows (links). Such information is useful to help identify potential problems for an urban system (e.g. due to sectors competing for a limited resource).</p>
<p><span class="citation">(TODO: reproduce Zhang 2013's figure)</span></p>
<p>The idea of looking at the mechanisms within a city has been extended by <span class="citation">Ravalde and Keirstead (2015b)</span>, who note that as well as understanding a city as a mix of economic sectors, it can also be understood as an engineered system. On this view, the system's nodes are resource management processes (e.g. powerplants and water treatment units), while the links are the flows between them. <span class="citation">Ravalde and Keirstead (2015b)</span> argues that this enables the study of how a city's process mix, layout and scheduling can be optimised to maximise synergies, and thereby minimise a city's overall resource consumption and waste generation. - Note <span class="citation">Procter, Kaplan, and Araujo (2015)</span></p>
<p>Another dimension to <span class="citation">(<span class="citeproc-not-found" data-reference-id="Zhang"><strong>???</strong></span>)</span>'s summary of UM research is to identify the purpose of UM studies under four methodologies: process analysis, which provides the theoretical basis (linear, circular and network, as discussed above); accounting and assessment, to quantify stocks and flows (perhaps using them to calculate performance indicators); simulation models, used to study dynamics, perhaps to see how a metabolism might change under various scenarios; and optimization and regulation, which seeks to improve a metabolism in relation to some objective through management interventions in the nodes and paths of a metabolic network. It is this last area which <span class="citation">(<span class="citeproc-not-found" data-reference-id="Zhang"><strong>???</strong></span>)</span> identifies as a need for future research.</p>
<p>Our introduction to UM thus far has been focussed on the resource flows into, out of and within urban areas. However, other studies attempt to integrate such studies of <em>flows</em> with the studies of cities spatial and material <em>forms</em> and/or their socioeconomic <em>functions</em>. - (urban political ecology, the central focus of https://www.bartlett.ucl.ac.uk/dpu/latest/publications/dpu-working-papers/WP168.pdf), - relationships with hinterlands and wider/global markets - form (&quot;such as distribution and density of housing, infrastructure etc.) influence MFA... who has access and who benefits from them...&quot; - <span class="citation">(<span class="citeproc-not-found" data-reference-id="Barles2010a"><strong>???</strong></span>)</span> - socioeconomic functions: <span class="citation">(<span class="citeproc-not-found" data-reference-id="Newmann1999"><strong>???</strong></span>)</span></p>
<p><span class="citation">Ravalde and Keirstead (2015b)</span> has argued for one step further, pointing out that - or they only focus on one resource, they are not intersectoral. Indeed, as <span class="citation">Fernandez-Mena, Nesme, and Pellerin (2016)</span> states the issue, UM models [TODO: note this was originally written in relation to nutrient recycling loops]</p>
<blockquote>
<p>&quot;... may seldom consider a whole mass balance since some flows are sometimes not quantified and do not always follow elements along their whole cycle... The poor mechanistic basis underlying urban metabolism may prevent their use for exploring and simulating options for more efficient recycling loops within social ecological systems.&quot;</p>
</blockquote>
<p>In summary, UM can be considered as the study of how a cities flows, forms and functions relate. While there is work to be done to study each of these areas (both individually, and how they relate), within the study of flows, the arguments of <span class="citation">Ravalde and Keirstead (2015b)</span> (developing those of <span class="citation">Zhang (2013)</span>) highlight a need to study how the processes within a city relate to each other, as an engineered system. Furthermore, <span class="citation">Zhang (2013)</span> points out the need for optimisation studies. Thus our work in this paper (to formulate an optimisation model to take advantage of synergies between different resource management infrastructure) helps to meet this gap. In this way our work meets calls for IE perspectives on UM <span class="citation">(Clift et al. 2015)</span> which (for example) identify future sustainable urban technologies.</p>
<h2 id="optimisation-modelling-review">Optimisation modelling review</h2>
<p>As we have just argued, the field of UM modelling has space for a resource management process-based optimisation model. However if we narrow down our focus from a whole-metabolism perspective, to a single type of resource, there do exist optimisation models which plan the management of resources, usually in the form of a 'minimum cost flow problem', which is a type of network problem <span class="citation">(Williams 1990, p81)</span>. This type of model aims to minimise or maximise some quantity (e.g. profit from product manufacture), and is modelled by a set of linear and/or nonlinear equations whose variables represent choices (e.g. the presence and/or location of some process, or the quantity of a given product to be produced by a particular process, etc.), which can themselves by bounded by other equations representing real-world constraints (e.g. maximum daily machine output). Mathematical routines operate on the equations to choose the variable values which maximise a quantity of interest.</p>
<p>Optimisation models models Scales: component to national/global</p>
<ul>
<li>MARKAL</li>
<li>Domestic</li>
<li><span class="citation">Keedwell and Khu (2006)</span> (e.g. decision variables include water pipe dimensions)</li>
</ul>
<p>Of most interest to use however, are the models formulated for the urban scale. One example from urban resource management is the urban energy system of <span class="citation">Keirstead et al. (2012)</span>. In one application, the model evaluates energy supply for a UK eco-town, focussing on the potential benefits of biomass-based systems<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. A set of linear equations represent the resource quantities (e.g. biomass, heat, electricity, etc.) supplied to and removed from zones within the town at any given time. Parameters represent the zonal resource demands, resource availability, and technology behaviour. Variables represent whether a technology is present in a given zone, and at what rate is operates, as well as a schedule of resource movements within and without the city.</p>
<p>Optimisation models also are used for water supply networks. For example <span class="citation">Zanganeh and Samani (2010)</span>'s model optimises the performance of an area's existing water network, choosing reservoir heights, pump sizes. <span class="citation">Lejano (2006)</span> applies optimisation modelling to a network design, starting with the spatial distribution of customer demands, it selects appropriate locations for the pipes. Some water optimisation models have ambitions greater than merely meeting demand, but also seek to minimise freshwater consumption through employing water reclamation processes, water saving technologies. Examples of these can be found in <span class="citation">Lim et al. (2010)</span> and <span class="citation">Makropoulos et al. (2008)</span>.</p>
<p>The idea that optimisation models can go beyond merely designing a minimum cost system, but also consider resource saving measures (as with some of the water models discussed above) is the idea behind our own model. Such considerations are also made in waste management planning optimisation models. For example, <span class="citation">(<span class="citeproc-not-found" data-reference-id="Guo2009"><strong>???</strong></span>)</span> optimises the allocation of waste flows from their point of generation to management facilities, to inform longterm investment decisions. (e.g. <span class="citation">Li and Huang (2006)</span>).</p>
<p>The models above vary in their formulations, according to their different purposes. Moving from these specific examples, to consider the resource optimisation modelling more generally, we now conduct a quasi-systematic literature review to identify some of these characteristics in order to highlight both precedents and gaps for our model. We start by using Scopus to search for relevant literature, using the search term <strong>energy AND water AND waste AND optimization model</strong>, and excluding irrelevant subject areas (such as psychology) from the search.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p>This step returned 6,840 results, which we filtered using R code to automatically remove titles not containing words related to 'optimization' [TODO: add footnote with URL], and titles unrelated to resource management<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>; before manually removing other irrelevant titles. This left 133 documents, which describe models at various scales (from optimising some component in a powerplant [TODO: example], to planning strategies at a regional level [TODO: example].</p>
<p>Across the different models, with their varying purposes, we could identify their various traits in order to highlight the need for our intersectoral synergy urban model, as well identify a suitable methodology to use. (Such excercises have been used elsewhere to identify modelling challenges and opportunities -- see for example the review of urban energy systems models in <span class="citation">Keirstead, Jennings, and Sivakumar (2012)</span>.) There are many aspects we could consider (e.g. spatial and temporal resolution, time horizon, incorporation of endogenous resource demands, integration capabilities with other models, etc.), but here, we focus on three characteristics most relevant to our model, namely: the <strong>detail</strong> to which models make infrastructure design decisions; the <strong>methods</strong> used to solve the models; and the degree to which they integrate different resource management systems in order investigate synergies (<strong>integration level</strong>).</p>
<p>The most detailed models make 'low-level' decisions, optimising variables such as pipe dimensions and their precise location [TODO: water example], biomass moisture content in gasification [TODO: cite Synthesis and thermo-economic design optimization of wood-gasifier-SOFC systems for small scale applications]. At the high-level, the design is focussed on a system's superstructure, representing a system as a network of resource sinks and sources, and their connections between them. Often, their job is to identify optimal resource transfers between sinks and sources, to meet some goal. They may optimise a spatial layout (the location of, and distance between sinks and sources), but they do not go into the precision of detailed design. Examples include <span class="citation">Keirstead et al. (2012)</span>'s urban energy system, the urban water system models of <span class="citation">Lim et al. (2010)</span> and <span class="citation">Makropoulos et al. (2008)</span>, whose models maximise opportunities for wastewater reuse, by identifying urban sinks and sources of waters of various different contamination levels, and optimising how they might be connected. These high-level models are more likely to be used in research, or the early exploratory stages of a system design, whereas the low-level models are more likely to be used to generate precision needed to design and operate a system in the real world. Other characteristics which split across these 'design purposes', are the temporal horizon (not considered further in this paper), and the spatial scale (discussed below).</p>
<p>[TODO: note the biomass superstructure models for high-level.][TODO: note 'in-between' (medium-level) models?] [TODO: note a difference between detail, and scale]</p>
<p>On solution methods to solve the optimisation which vary according to the formulation, of which there are two broad categories: linear and nonlinear. Linear models include many of the energy systems models (including <span class="citation">Keirstead et al. (2012)</span>), whic are based on mass or energy balances which can be linearly formulated [TODO: list examples from the spreadsheet]. There are subsets of linear problems, for example, some variables must take integer values (e.g. defining the number of a particular process in a location), and thus employ mixed-integer linear programming (MILP). Linear models can also have uncertain parameters, by defining them as probability distributions. This is especially true of waste management models, where long-term waste generation rates are uncertain. These stochastic linear models require multiple-stage methods to solve [TODO: list examples from the spreadsheet]. Nonlinear formulations are likely to be found in water management models. The first reason for this is that they many are based upon hydraulic equations which include the product of two or more variables<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>, especially the case for the low-level modles [TODO: list examples from the spreadsheet]. But nonlinearity in the high-level superstructure models, in order to model water contamination levels, when different water/wastewater streams mix [TODO: list examples from the spreadsheet]. Nonlinear problems can be solved using the nonlinear programming methods [TODO: examples of NLP and MINLP], but these are computationally expensive, so heuristics are often used to obtain near-optimal solutions with less effort. These heuristics often start with a possible set of variable values, and the imitate processes in nature to modify these solutions until a near-optimal solution is found. Examples include genetic algorithms which follow evolutionary procedures [TODO: example]; and particle swarm optimisation, which mimic the flocking of birds [TODO: example].</p>
<p>Thirdly, we consider the extent to which models integrate different resource management systems, defining three levels. Each level indicates to what extent a model optimises intersectoral synergies, and are diagramatically represented in Figures [TODO: figure cross-refs].</p>

<p>Figure , shows which level of systems integration applies to each of the models in our review, for models at various scales.</p>
<div class="figure">
<embed src="figures/model-lit-review-categMatchPlot-1.pdf" /><p class="caption">Model integration levels.</p>
</div>
<p>[TODO: note this reference &quot;Optimization methods applied to the design of eco-industrial parks: A literature review&quot; (review of literature (methods) where EIP's engage in the exchange of energy/materials/water (similar to our paper). Conclusions could be interesting).]</p>
<p>The focus of this research are the highly integrated models -- which presently -- are rare, though they do exist, particularly for refineiries and eco-industrial parks, to simultaneously optimze the management of multiple resource types exchanged between the processes in these entities [TODO: cite examples]. Examining these titles, it is clear that there are no models which address the opportunity to simultaneously plan energy, water, and waste management in order to improve an area's metabolism. The models to most closely meet these ambitions are for eco-industrial parks (<strong>EIP</strong>s), where models try to realise maximum benefit from IE possibilities, to identify the most beneficial energy and material exchanges between processes [TODO: cite an example?]. However, as the review article by <span class="citation">Boix et al. (2015)</span> notes, these models emphasize &quot;...either the water network, or the energy links or waste disposal facilities but never the whole networking&quot; (p.314). Similarly at the city-scale, even dropping down a level to integrated models the focus tends to be on the integration of energy with some other system or integrating water networks into existing systems.</p>
<p>Considering how the dimensions of detail fit into our modelling aims, when considering multiple resource system types, it seems prudent to start with a simple representation of the various systems, before delving into the intricacies of the detail design and operation of the system, which require specialist expertise regarding the systems being modelled. This means looking to high-level model. In regards to the formulation, MILP methods provide control of the management processes used, the resource flows between them, and their corresponding transport links.</p>
<p>[NOTE: for thesis, methodology is still and open question at this point, hence thesis chapter on method.]</p>
<h2 id="summary">Summary</h2>
<p>As the UM framework is used to study urban sustainability, in relation to its resource flows, forms, and function, one developing area is consider the processes occurring inside a city more closely. One step towards this end, is to consider a city as an engineered-system, made up of a network of resource management processes, through which resources from beyond the city boundary are converted, in order to meet demand for energy, and water (similarly, the network manages wastes, and returns them to the wider environment). Such a network representation of a city's resource management leaves opens up the possibility of using optimisation modelling to design a model which can help researchers, planners and policy makers plan resource management to take advantages of the synergies between systems. If implemented, this model would minimise drawing from, and returning wastes to, the environment, and thereby improve an area's overall metabolism. Such a model would be high-level (rather than detailed), and its novelty lies in its highly-integrated consideration of energy, water, and waste resource management systems. The rest of this paper introduces the model, starting with its mathematical formulation, followed by an application to a case study.</p>
<p>[TODO: Bringing together the fields of urban metabolism, and resource optimisation modelling...]</p>
<p>[TODO: Advancing the frontier of optimisation modelling within IE from EIPs to urban areas as a whole...]</p>
<p>[TODO: given our aims are mainly focussed on UM, rather than detailed infrastructure design, then a highly integrated model is appropriate.]</p>
<!--
In summary, optimisation modelling is used for many purposes to help plan resource management. However, our exhaustive search of the literature how shown that no models are appropriate to consider urban energy, water and waste management simultaneously, to realise synergistic benefits. Nevertheless, they do model multiple resource optimisation at suitable scales, to make the idea of such a model plausible (at least from an engineering point of view, if not one of free-market economics.

Lit review structure from JK's MILP paper.

- General decisions (discrete, continuous), linear, nonlienar, algorithms etc.
- Existing models (continue paragraph on small scale)
- Existing models (moving up the scale)
- Existing models (highest level)
- Example of a generic model
- Another example of a generic model
- Another example of a generic model
- Another example of a generic model
- Specific examples
- Summary of existing models
- Models with the most potential
- "The model presented in this paper has been developed to..." continue to understand the inside of the blackbox
-->


<h1 id="model-structure-formulation-and-implementation">Model structure, formulation and implementation</h1>
<!--
Sections from JK's MILP paper

# Model structure, formulation, and implementation

In our model, the urban region under study is

- Zones/demands/imports/exports
- Resources (demands)
- Conversion technologies (STN)
- RTN
- Interzonal connections
- Storage

# Mathematical formulation

- Key equation

## Imports and exports
## Resource conversion technologies
### Domestic technologies
### Part-Load operation
### Further extensions
## Units of measurement
## Transport technologies
## Storage technologies
### Detailed storage constraints
### Aggregate storage constraints
## Footprint constraint
## Performance metrics and objective function

# Implementation

- Ontology database
- GAMS
- Java app
-->

<!--
- [TODO: ref metric paper] showed that so-called 'grey-box' metrics (i.e. exergy-based and ENA-based) provide particularly helpful insights on urban resource efficiency.
    - Background section on precedent modelling: justify chosen metrics (e.g. exergy) with respect to Ravalde and Keirstead (2015), and justify omission of cost (one reason, is that our data included future technologies, i.e. as yet uncosted. Futhermore, 'costable' processes still vary around the world, due to exchange rates and differences in purchasing power, and furthermore, will change as a f(time)).
-->

<p>Our model will consider a city as divided into a number of zones, for which can be specified demands for resource management, and which can contain the processes which convert resources. These zones also possess connections to other zones for resource transportation, and to outside the city for importing and exporting. To this end, our models will be based on the model by <span class="citation">Keirstead and Shah (2013)</span> which we introduced earlier as a high-level MILP model to plan urban energy resource systems.</p>
<p>To model the processes which convert resources, <span class="citation">Keirstead and Shah (2013)</span> looks to the engineering State-Task Network model of <span class="citation">Kondili, Pantelides, and Sargent (1993)</span>, in which processes ('tasks') convert materials from one 'state' to another. Keirstead's model applies the same principles to urban energy systems in a so-called Resource-Technology Network (RTN), developing a model which chooses the mix of processes that uses available resources to meet demand for heat and electricity. While <span class="citation">(<span class="citeproc-not-found" data-reference-id="Keirstead"><strong>???</strong></span>)</span>'s model is categorised as having no system integration, the State-Task network representation is highly generalised (i.e. all conversion processes are represented by the same type of equation), thus the formulation can be easily extended to consider resources and processes from multiple sectors.</p>
<p>Like Keirstead's model, processes are separated into conversion processes (such as a wastewater treatment plant) and transport processes (such as a pipeline). The transport processes will connect the different zones into which an urban area is divided, allowing resources to be transported to and from different parts of the city. The main equation is a resource balance,</p>

<p>which specifies the amount of a particular resource <span class="math">\(r\)</span> at any given time <span class="math">\(t\)</span> in zone <span class="math">\(z\)</span>. The demand <span class="math">\(D^{(qty)}\)</span> parameter is specified by the user, and the model will choose the resource quantity imported into the city <span class="math">\(I\)</span>, exported from the city <span class="math">\(E\)</span>, generated by conversion processes <span class="math">\(G\)</span>, and net inflow from other zones <span class="math">\(V\)</span> (referred to as 'variables'). Like Keirstead's model, the resources are expressed in terms of quantities (such as MW of electricity or kg/s of solid waste), which in our equations is denoted by the <span class="math">\(^{(qty)}\)</span> superscript. However, here we evolve Keirstead's formulation, by defining resource flows in terms of their <em>quality</em>, such that a resource can be attributed with both an energy and a mass. This is useful as we consider interaction between different sectors. Consider a body of water: this can supply (for example) both cooling for industrial processes, and hydroelectric electricity -- in our model we would need to know both its mass, and its energy head due to elevation. Thus the formulation specifies an equation analogous to  which defines flows in terms of their quality (using the <span class="math">\(^{(qual)}\)</span> superscript notation):</p>

<p>This introduces the quality index <span class="math">\(q\)</span>, and the parameter <span class="math">\(X\)</span> which defines a resource's quality<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> which is a multiplier of any resource quantity value, such that it separates a quantity into its qualities.</p>
<p>The variable <span class="math">\(G\)</span> denotes the net quality of resource produced by a conversion process in a zone at a particular time. Conversion processes are modelled as black boxes with resource inputs and outputs, defined by the coefficients <span class="math">\(k^{proc}_{prq}\)</span>:</p>

<p>The variable <span class="math">\(F_p\)</span> defines the operation rate of a process <span class="math">\(p\)</span> which can run between a range of values (e.g. a power plant's maximum operating capacity). Using the <span class="math">\(X_{rq}\)</span> parameter, we can formulate the quantity version of :</p>

<!--
This equation only needs to be applied in the case where a process $p$ produces or consumes resource $r$ with qualities $q$, hence the condition based on the $\delta_{prq}$.
-->
<p>Transport processes are defined similarly to conversion processes, using coefficients to represent the relative quantities of resources involved in the transfer from one zone to another, to calculate the variable <span class="math">\(V\)</span> for each zone, as the net inflow of a resource (<span class="math">\(\mbox{summed inflow from all other zones} - \mbox{summed outflow to all other zones}\)</span>):</p>

<p>Coefficients and process rates are defined for transport technology <span class="math">\(\tau\)</span>, both for the zone of origin <span class="math">\(z\)</span>, and the zone of destination <span class="math">\(z&#39;\)</span> (where the <span class="math">\(&#39;\)</span> notation indicates the destination zone). Furthermore, the quantity of input resources can be defined by the linear sum of two coefficients, denoted by <span class="math">\(\alpha\)</span> and <span class="math">\(\beta\)</span>. For example to transport 1 kg of coal from <span class="math">\(z\)</span> to <span class="math">\(z&#39;\)</span> (defined by <span class="math">\(k_{\tau rq}^{\alpha}=-1\)</span>, <span class="math">\(k_{\tau rq}^{\alpha&#39;}=1\)</span>) will require a quantity of petrol dependent on the distance between the zones <span class="math">\(l_{zz&#39;}\)</span>, thus defined by <span class="math">\(k_{\tau rq}^{\beta}\)</span> and <span class="math">\(k_{\tau rq}^{\beta&#39;}\)</span>. In the case where transport losses occur (such as electricity transported via a cable), <span class="math">\(k^{\alpha}_{\tau rq} &gt; k^{\alpha&#39;}_{\tau rq}\)</span>. To calculate the quantity flows, we once again use the <span class="math">\(X_{rq}\)</span> parameter:</p>

<p>Finally, the model will minimise some objective, for example, the cost of resource imports:</p>

<p>Equations -- form the programme's main constraints. For a full description, see Appendix [TODO: cross-ref to appropriate appendix] which lists other constraints (such as upper limits imposed on resource imports). The formulation includes continuous variables (such as resource quantities and process rates), integer variables (the number of conversion processes in a zone), and binary variables (for the existence of a transport process between two zones). All equations are linear, resulting in a mixed-integer linear programme (MILP).</p>
<p>As for implementation, our model requires both its equations to be encoded in a programming language which can be solved using MILP solvers (such as CPLEX or Gurobi), and the parameter data which defines the demands, process-behaviour and other constraints. These two elements are kept separate, making it convenient to generate different models for convenience. The data are stored in CSV and YAML text files, both of which are chosen for their human-readability and their ease of editing:</p>
<ul>
<li>CSV files specify any data with a spatial element, including the layout, the demands, import/export limits, etc. These have the advantage of being editable using spreadsheet software.</li>
<li>YAML<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> files define both resources and processes [TODO: further detail] in a human-readable format. This format allows data to be stored heirarchichally (i.e. nested like sub-items and sub-sub items in an itemized list).</li>
</ul>
<p>To define a particular model instance, a configuration YAML specifies which YAML and CSV files), and R code then writes a GAMS script which combines the data with the code.</p>
<h1 id="case-study-results-and-discussion-although-discussion-might-be-separate">Case study (results and discussion, although discussion might be separate)</h1>
<!--
Sections in JK's MILP paper

# Case study

- proposed eco-town development (ambitions)
- site characteristics
- zonal demands
- timings
- figrues with data

## Resources and technologies
## Objective function
## Results
-->

<p>To demonstrate the model we have formulated above, we will use a new Chinese urban development as a case study. The development is led by the Shann GU company<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a>, and concerns a 13 km<span class="math">\(^2\)</span> site accommodating 133,000 people, with residential, commercial, industrial and recreational functions. For the case study take the predicted resource demands for the site, and run the model for several scenarios (outlined below) to optimise the development's metabolism. Note that a strict definition of 'optimise' is not considered here (though this question has been explored elsewhere, e.g. <span class="citation">Ravalde and Keirstead (2015a)</span>); our primary purpose is to introduce our new model. As such we will apply various environmental and economic objectives which may interest stakeholders.</p>
<p>[TODO: idealised representation figure]</p>
<h2 id="input-data">Input data</h2>
<!--
- Data
    - resources
        - generic
        - specific, due to the site, e.g. exergy of heat
    - processes
        - generic, from the database
        - specfic, due to the site, e.g. rain, leachate = f(rain, evaporation, landfill area)
        - real processes, heat exchangers (and associated water flows)
        - dummy processes (e.g. MSW splitting, waste generalising)
-->

<p>This section introduces the data used as parameters in the model. Further details regarding sources and assumptions are given in the Appendix. The actual data is available from the supplementary information at <a href="../shann-gu-documentation/data.html">TODO-link-to-supplementary-information</a>.</p>
<h3 id="site-layout">Site layout</h3>
<p>This data defines the set of zones <span class="math">\(Z\)</span>, and the distances between any pair of zones (<span class="math">\(l_{zz&#39;}\)</span>), and whether any pair of zones are neighbouring (and hence if they can be connected by transport processes from set <span class="math">\(T\)</span>). We have estimated this information from the Shann Gu documentation, with 13 zones defined within the 13 km<sup>2</sup> construction region.</p>
<h3 id="site-layout----appendix">Site layout -- Appendix</h3>
<p>According to the Shann Gu documentation, the site's construction region is 13 km<sup>2</sup>, with industry in the north, residential and commercial use in the centre, and recreational functions in the south.</p>
<p>Neighbouring zones belong to set <span class="math">\(nb(z,z&#39;)\)</span>. [Complete]</p>
<h3 id="times">Times</h3>
<p>The times set <span class="math">\(T\)</span> defines the times considered, with their lengths given by <span class="math">\(span(T)\)</span> [TODO: re-notate]. In our case we've defined seasons for <code>winter</code>, <code>summer</code> and <code>shoulder</code>, with spans of 90 days, 90 days, and 180 days, respectively.</p>
<h3 id="resource-demands">Resource demands</h3>
<p>The Shann Gu documentation specifies demands (<span class="math">\(D^{(qty)}_{rzt}\)</span>) for electricity, heating, water consumption. We also derive quantities for wastewater and waste generation, which can be defined using negative values. Demand is defined on a per-second basis (MW for energy demands, kg/s for the others).</p>
<h3 id="resource-demands----appendix">Resource demands -- Appendix</h3>
<ul>
<li>The code is set up, such that only <span class="math">\(D^{(qty)}_{rzt}\)</span> need be defined, with <span class="math">\(D^{(qual)}_{rqzt}\)</span> defined automatically.</li>
<li>Summary table?</li>
</ul>
<h3 id="resource-options">Resource options</h3>
<p>As well as the resource demands, our case studies consider another [TODO: number] resources in set <span class="math">\(R\)</span> which can be used as part of the conversion chain to meet demand. These include [TODO: list examples]. For each resource why can apply a conta</p>
<p>Each resource has at least one associated quality <span class="math">\(q\)</span>, which are defined in the <span class="math">\(Q\)</span> set. For our purposes we use <code>mass</code> and <code>energy</code> qualities, which are attributed to each resource with the <span class="math">\(X_{rq}\)</span> parameter.</p>
<p>For each resource, we need to define the minimum and maximum allowable imports and exports (again, on a per-second basis), and the number of zones allowed to import or export any particular resource. We also define a cost to import each resource [TODO: source information].</p>
<h3 id="process-options">Process options</h3>
<p>Our modelling considers up to [TODO: number] processes <span class="math">\(p\)</span> which convert resources (depending on the scenario). [TODO: add details on scenarios here, or elsewhere?] These processes are taken from the open-source database of urban metabolism processes outlined in <span class="citation">(<span class="citeproc-not-found" data-reference-id="Ravalde2015b"><strong>???</strong></span> ^process-data)</span>, or the Shann Gu documentation. Each process definition also includes its capacity (i.e. the maximum MJ/s or kg/s which can be converted).</p>
<p>For each process, we also provide an estimated cost (in USD). Apart from the shear number of processes in our database (over 300), several factors make this tricky: first and foremost, our process database considers future processes which have not yet penetrated into the market. In addition, exchange rates and purchasing power parities around the world make it difficult to cost a process with any degree of certainty. For this reason, our costing is approximate. Nevertheless, this is important to get plausible results. (See the supplementary information for references, assumptions, calculations, and other details.) ).</p>
<p>Similarly, up to [TODO: number] transport processes are also defined (using the <span class="math">\(k\)</span> coefficients), and maximum transport rates (MW or kg/s).</p>
<ul>
<li>pipes (costed)</li>
<li>roads (free)</li>
</ul>
<h2 id="model-scenarios">Model scenarios</h2>
<p>We study [TODO: number] scenarios using different subsets of the processes, to suggest how different networks of processes can satisfy demand under varying circumstances (following the methodology of <span class="citation">Keirstead et al. (2012)</span>). For some scenarios, we model sub-scenarios, where we use different objective functions, or introduce an additional constraint to illustrate Pareto optimality. The scenarios are:</p>
<ol style="list-style-type: decimal">
<li><em>Base case.</em> This assumes that electricity, fuels and water are imported to the site as needed (with wastewater treated on site), thus there is no attempt to take advantage of synergies. As such, this scenario provides baseline results.</li>
<li><em>Design case.</em> The Shann Gu site developers intend to take advantage of intersectoral synergies to minimise resource consumption. This scenario considers the processes suggested in the Shann Gu documentation, including combined heat and power (CHP), a wastewater source heatpump combined with a district heating network. We consider how the process choice changes, with different objecitves:
<ol style="list-style-type: lower-alpha">
<li>Minimise cost</li>
<li>Minimise emissions</li>
<li>Minimise waste</li>
<li>Minimise freshwater consumption</li>
</ol></li>
<li><em>Wildcard case.</em> This scenario allows any process from the database compiled by <span class="citation">Ravalde and Keirstead (2015b)</span> to be incorporated into the site's resource management network. This database includes both existing and still-to-be-implemented management processes, so we consider the following sub-scenarios, at minimum cost:
<ol style="list-style-type: lower-alpha">
<li>Currently available processes</li>
<li>Medium-term available technologies</li>
<li>Long-term available technologies</li>
</ol></li>
</ol>
<p>Scenario 3a [TODO: update if necessary] is the largest, and thus indicates the computational effort required to solve the problems, having [TODO: number] single variables, [TODO: number] discrete variables, [TODO: number] binary variables, [TODO: number] equations [TODO: etc.].</p>
<p>These scenarios are fairly simple, and illustrate the sensitivity of a network to fairly broad considerations (technology availability, and simple objective functions). Detailed design problems should be more narrowly focussed, by applying sensitivity analysis to understand how a system design responds to changes in efficiency (reducing demand), market value of imported and exported goods, and other factors. <span class="citation">(TODO: reproduce Saltelli et al. citation from Keirstead et al. 2012??)</span>. <!--
OTHER SCENARIO VARIATIONS
- DSM
- min-cost
- min emissions
- cost/emissions pareto
- export revenue (e.g. hydrogen economy)
- Exergy verses other objectives (cost, carbon footprint, water footprint, waste output)
- min cost -- DSM
- min cost -- phased planning
- min water
- min landfill
- min cost/targets of individual sectors (energy, water, waste), or differently weight them?
--></p>
<h2 id="results-and-discussion">Results (and discussion)</h2>
<p>We present the results of each scenario in a number of ways (summarised in Table [TODO: cross-ref]. First, the annual costs (including conversion and transport capital costs, as well as resource import costs), are calculated (Figure [TODO: cross-ref]). Second, we consider each system's emissions from the processes (though it is beyond the scope of this study to trace emissions up the supply chain) (Figure [TODO: cross-ref]). Third, we consider the metabolic inputs and outputs to each system (Figure [TODO: cross-ref]). Fourth, we consider the network of conversion processes which makeup each system (Figure [TODO: cross-ref]).</p>
<p>[TODO: SNA (or triangular grid) figures for each scenario]</p>

<p>[TODO: Dot plot of scenario costs (import, transport, conversion, etc.)].</p>
<p>[TODO: Dot plot of imports and exports. All scenarios on same figure, faceted by resource and scenario].</p>
<p>With some systems so large (over [TODO: number]) process types, space limitations prevent us from display all information of interest (e.g. the quantity of any particular technology). However however, the Supplementary Information includes all results in CSV format.</p>
<p>The number of technologies used by a scenario increases as more are available, showing that systems take advantage of the full range of available conversion processes, with more being used to minimise the objective as much as possible. When different objectives are applied to the same technology choice (e.g. 2a and 2b [TODO: update if necessary]), we observe the sensitivity of the technology mix in the network [TODO: can this be quantified by some metric?].</p>
<p>[TODO: comment on the mix of technology sizes in various scenarios.][TODO: comment on which technogies are most relied upon in each system.] [TODO: comment on transportation reliance (e.g. central import + distribution, or central import and conversion, etc.?][TODO: comment on coversion/transportation mix effect on (capital) costs?]</p>
<p>There are limitations to what the results show. We have already noted the approximate nature of process costs. Furthermore [TODO: comment on part-load operation], for the sake of simplicity, our model has aggregated yearly demand to a single per-second value (rather than considering peak and average demand). Thus, we are unable to quantify the degree to which conversion processes within our systems are oversized, without running models with a finer temporal resolution which accounts for variations within a single day.</p>
<h3 id="costs">Costs</h3>
<p>Comment on (percentage) differences between scenarios, and suggest reasons for differences (e.g. capital costs and imports).</p>
<h3 id="emissions">Emissions</h3>
<p>Comment on (percentage) differences between scenarios, and suggest reasons for differences (e.g. synergies).</p>
<h3 id="metabolic-inputs-and-outputs">Metabolic inputs and outputs</h3>
<p>Comment on (percentage) differences between scenarios, and suggest reasons for differences (e.g. synergies).</p>
<h1 id="discussion-and-conclusions">(Discussion and) Conclusions</h1>
<!--
Paragraph ideas from JK's MILP paper
# Conclusions

- "There have been many models developed...however..."
- "In this paper we..."
- "Another feature of the model..."
- "The model was illustrated using..."
- "There are a number of future directions for the model..."
-->

<p>There is no doubt that modelling has helped planners and policy makers design systems to manage resources to optimal performance in cities. However, to date, energy, water and waste resources have been managed with their own separate modelling tools. But by neglecting the synergies between different resource types, these approaches limit the resource savings a city can make. Thus we have adapted <span class="citation">Keirstead and Shah (2013)</span>'s urban energy systems model to introduce a new model which optimises an urban area's resource-technology management, by choosing an appropriate technology mix and a corresponding schedule of resource imports and exports. Using the database of <span class="citation">Ravalde and Keirstead (2015b)</span>, we have applied the model to a Chinese urban development case study, for [TODO: number] scenarios.</p>
<p>[TODO: discuss the middle of the system] <!--
Despite a gallimaufry of urban metabolism models and resource optimisation models, there is still need for an integrated model, to meet ambitions for intersectoral urban synergies. We have begun this processes, developing @Keirstead2013a's model to create a generically defined [TODO: complete...]

In this paper, we have adapted the urban energy systems model of [TODO: cite Keirstead et al.] to formulate a new model which simultaneously optimises the management of energy, water and waste, to improve the metabolism of an area, and applied it to a new urban development in China, using data collected for @Ravalde2015b.
--></p>
<p>In addition to contributing a model for use in research, planning and policy, our results have showed that for the Shann Gu site, an objective (e.g. minimising cost, emissions, or some other quantity) is more readily met by taking advantage of more process types (particularly of a smaller capacity), in a decentralised network, rather than the more traditional centralised systems. This fits with findings from individual sectors (e.g. energy supply and water supply) where decentralised are increasingly encourages, with waste- and by-products cascading down through a system [TODO: provide reference].</p>
<p>[TODO: summarise and explain other key findings]</p>
<p>Having contributed this new tool, we recognise that given the early nature of this work, there is further work which can help make this tool more usable in the real world. Firstly, more data can be contributed to the <span class="citation">Ravalde and Keirstead (2015b)</span> database (e.g. process costs, appropriate to specific locations and currencies). Secondly, the model formulation can be made more sophisticated, perhaps introducing separate categories of technologies which distinguish between domestic and non-domestic technologies, and introducing storage technologies <span class="citation">(Keirstead 2013)</span>. It could also incorporate 'hierarchical non-uniform time discretization' which is a sophisticated way to consider the variation in resource demand over hourly, daily weekly, and seasonal periods, at lower computational cost than considering continuous profile over a long period <span class="citation">(Keirstead 2013, p161)</span>. Another addition to the formulation could be a device's spatial footprint. [TODO -- Note to James: domestic techs, and spatial footprint are considered in the unpublished paper, but not the book chapter.]</p>
<p>Moving from considering the metabolic <strong>flows</strong>, and turning our attention to the socioeconomic <strong>functions</strong>, work should consider how our model can be applied within the broader socioeconomic systems. In our case study, the modeller has complete control over energy, water, and waste management sectors. While the operator of a single system (such as an energy supplier) might have such control, different resources are often managed by different actors, each seeking to maximise their own profits and incentives [TODO: reference]. Plausibly therefore, this modelling work could contribute to arguments which favour planned utilities management over free-market management, a debate ongoing anyway with the increasing interest in Smart cities [TODO: reference].</p>
<p>In conclusion, in an increasingly resource-constrained world which faces the combined challenges of population growth, global warming,water scarcity, and shrinking landfill capacity, cities are being hailed as the most efficient means to provide goods and services. However, to take full advantage of this, cities should exploit their co-location of processes to benefit from synergies between energy, water and waste management systems. Our model is one step further along the journey to that end.</p>
<h1 id="acknowledgements" class="unnumbered">Acknowledgements</h1>
<p>Tom Ravalde is supported by the EPSRC Doctoral Training Partnership at Imperial College London. The [TODO: details] data was provided by [TODO: Yingru/Xiamen/Shann Gu].</p>
<h1 id="appendix" class="unnumbered">Appendix</h1>
<ul>
<li>Full mathematical formulation. I.e., in the main body, we only need to include the essential balance and process equations. Other constraints (e.g. limits on imports/exports can go in the Appendix).</li>
<li>Demands</li>
<li>Tabulate resource data (exergy, emissions, CF, WF Cost Revenue)</li>
<li>Example black box process models</li>
<li>Identify dummy processes (waste splitter, and waste generaliser, water splitter (recognising that higher quality waters can be used in lower quality applications)</li>
<li>Example network configuration results</li>
<li>Links to data, code and results on GitHub</li>
<li>Summarised version of the demand data</li>
<li>Link to GitHub/website of supplementary information
<ul>
<li>CSV master table</li>
<li>R-script to produce data summaries, based on the master table's 'tidy' form.</li>
<li>Details on model formulation (comparison of performance, etc.)</li>
<li>Details on Shann Gu specific parameters (e.g. groundwater pumping, surface water availability, rainfall)</li>
</ul></li>
</ul>
<h1 id="appendix----data-todo-move-to-the-appendix-and-retitle">Appendix -- data [TODO: move to the appendix, and retitle]</h1>
<ul>
<li>Assume documentation gives peak values
<ul>
<li>Assume peak values at all times?</li>
<li>Calculate daily averages based on peaks?</li>
<li>Compartmentalise into peaks and averages?</li>
</ul></li>
</ul>
<h1 id="appendix----formulation" class="unnumbered">Appendix -- formulation</h1>
<p>The maximum rate at which a conversion process can operate is given as:</p>

<p>where the variable <span class="math">\(N_{pz}\)</span> is the number of process type <span class="math">\(p\)</span> in zone <span class="math">\(z\)</span>, and the parameter <span class="math">\(F^{max}_p\)</span> is process <span class="math">\(p\)</span>'s maximum operating rate.</p>
<p>The maximum rate between zones <span class="math">\(z\)</span> and <span class="math">\(z&#39;\)</span> at which a transport process can operate is given as:</p>

<p>where the integer variable <span class="math">\(\delta_{\tau zz&#39;}=1\)</span> when transport process <span class="math">\(\tau\)</span> exists between zones <span class="math">\(z\)</span> and <span class="math">\(z&#39;\)</span>, and the parameter <span class="math">\(F^{transp,max}_p\)</span> is process <span class="math">\(\tau\)</span>'s maximum operating rate (e.g. the maximum water flow rate of a pipe). Having defined the existence of a transport link between two zones, we assume that a link in one direction (<span class="math">\(z \rightarrow z&#39;\)</span>) necessarily defines a link in the opposite direction, thus:</p>

<p>Further, we define a set <span class="math">\(nb\)</span> which specifies whether any two zones are neighbours. Only connections within this set can be linked by transport infrastructure. This not only models reality, but also reduces the model size:</p>

<p>The imports and export quantities must lie between <span class="math">\(I^{min}\)</span> and <span class="math">\(I^{max}\)</span> parameters, and thus can be expressed with the following constraint:</p>

<p>where <span class="math">\(\delta^I_{rz}\)</span> is a binary variable which equals 1 if conversion process <span class="math">\(r\)</span> exists in zone <span class="math">\(z\)</span>. This variable is itself subject to the constraint that only a <span class="math">\(N^I_r\)</span> zones can be used to import any given resource <span class="math">\(r\)</span>:</p>

<p>Analogous constrains apply to exports:</p>

<p>Finally we consider possible objective functions, which could be a combination of costs (<span class="math">\(C^*\)</span>) and environmental impacts. Resource costs could be defined, thus:</p>

<p>where the parameter <span class="math">\(l_{zz&#39;}\)</span> defines the distance (length) between two zones. The costs above can be combined into a single objective function.</p>

<p>where coefficients <span class="math">\(\gamma^*\)</span> could weight the component costs according to time span (e.g. a 20 year investment period), or their relative importance to a particular stakeholder.</p>
<p>Other types of objective function could include the carbon footprint <span class="math">\((CF)\)</span> of an area, using the emissions factor of a resource <span class="math">\((ef)_r\)</span>:</p>

<p>More simple objective function might simply be to minimise the imports of a particular resource (e.g. water imports).</p>
<p>Objectives can be traded-off against each other, using so-called 'Pareto optimisation'. One equation is used as the objective function (for example cost), while another is defined as an inequality constraint (for example emissons):</p>

<p>The user runs the model multiple times, changing the value of <span class="math">\(lim\)</span>, such that one can plot a curve of emissions against cost.</p>
<h1 id="useful-files-and-folders" class="unnumbered">Useful files and folders</h1>
<ul>
<li>Daiwang-case-study/data-notes.md</li>
<li>code (copy) &lt;&lt; (GMS files only)</li>
<li>workshop-june-2014-shann-gu/shann-gu-parameters.gnumeric &lt;&lt; assumptions for the pre-China trip version of the Shann Gu model</li>
<li>workshop-june-2014-shann-gu/table-resource.csv &lt;&lt; references for resource costs and emissions factors (for the pre-China trip version of the Shann Gu model)</li>
<li>workshop-june-2014-shann-gu/table-process.csv &lt;&lt; references for the process size and costs (for the pre-China trip version of the Shann Gu model)</li>
<li>workshop-june-2014-shann-gu/paper/Shann-gu-paper_T-Ravalde.pdf &lt;&lt; Appendix contains calculations, assumptions, and links for process and resource parameter values (for the pre-China trip version of the Shann Gu model)</li>
<li>conf-paper &lt;&lt; contains paper and presentation, giving zones etc. (for the post-China trip version of the model, i.e. more zones)</li>
<li>shann-gu-documentation &lt;&lt; various presentations and papers, and shann-gu_lingtong.gnumeric spreadsheet of data and assumptions</li>
</ul>
<h1 id="references" class="unnumbered">References</h1>
<!--

-->


<div class="references">
<p>Boix, Marianne, Ludovic Montastruc, Catherine Azzaro-Pantel, and Serge Domenech. 2015. Optimization Methods Applied to the Design of Eco-Industrial Parks: A Literature Review. <em>Journal of Cleaner Production</em> 87 (1) (January): 303317. doi:<a href="http://dx.doi.org/10.1016/j.jclepro.2014.09.032">10.1016/j.jclepro.2014.09.032</a>. <a href="http://www.sciencedirect.com/science/article/pii/S0959652614009627">http://www.sciencedirect.com/science/article/pii/S0959652614009627</a>.</p>
<p>Clift, Roland, Angela Druckman, Ian Christie, Christopher Kennedy, and James Keirstead. 2015. Urban Metabolism: a Review in the UK Context. <a href="https://www.gov.uk/government/publications/future-of-cities-urban-metabolism">https://www.gov.uk/government/publications/future-of-cities-urban-metabolism</a>.</p>
<p>Fernandez-Mena, Hugo, Thomas Nesme, and Sylvain Pellerin. 2016. Towards an Agro-Industrial Ecology: A Review of Nutrient Flow Modelling and Assessment Tools in Agro-Food Systems at the Local Scale. <em>Science of the Total Environment</em> 543: 467479. doi:<a href="http://dx.doi.org/10.1016/j.scitotenv.2015.11.032">10.1016/j.scitotenv.2015.11.032</a>.</p>
<p>Keedwell, Edward, and Soon-Thiam Khu. 2006. Novel Cellular Automata Approach to Optimal Water Distribution Network Design. <em>J. Comput. Civ. Eng.</em> 20 (1): 4956. doi:<a href="http://dx.doi.org/10.1061/(asce)0887-3801(2006)20:1(49)">10.1061/(asce)0887-3801(2006)20:1(49)</a>. <a href=")">)</a>.</p>
<p>Keirstead, James. 2013. Benchmarking Urban Energy Efficiency in the UK. <em>Energy Policy</em> 63 (December): 575587. doi:<a href="http://dx.doi.org/10.1016/j.enpol.2013.08.063">10.1016/j.enpol.2013.08.063</a>. <a href="http://www.sciencedirect.com/science/article/pii/S0301421513008677">http://www.sciencedirect.com/science/article/pii/S0301421513008677</a>.</p>
<p>Keirstead, James, and Nilay Shah. 2013. <em>Urban Energy Systems: An Integrated Approach</em>. Routledge. doi:<a href="http://dx.doi.org/10.1504/IJTM.2006.009458">10.1504/IJTM.2006.009458</a>. <a href="https://books.google.com/books?hl=en{\&amp;}lr={\&amp;}id=R30{\_}62ZRfxIC{\&amp;}pgis=1">https://books.google.com/books?hl=en{\&amp;}lr={\&amp;}id=R30{\_}62ZRfxIC{\&amp;}pgis=1</a>.</p>
<p>Keirstead, James, Mark Jennings, and Aruna Sivakumar. 2012. A Review of Urban Energy System Models: Approaches, Challenges and Opportunities. <em>Renewable and Sustainable Energy Reviews</em> 16 (6) (August): 38473866. doi:<a href="http://dx.doi.org/10.1016/j.rser.2012.02.047">10.1016/j.rser.2012.02.047</a>. <a href="http://linkinghub.elsevier.com/retrieve/pii/S1364032112001414">http://linkinghub.elsevier.com/retrieve/pii/S1364032112001414</a>.</p>
<p>Keirstead, James, Nouri Samsatli, A. Marco Pantaleo, and Nilay Shah. 2012. Evaluating Biomass Energy Strategies for a UK Eco-Town with an MILP Optimization Model. <em>Biomass and Bioenergy</em> 39 (0) (April): 306316. doi:<a href="http://dx.doi.org/10.1016/j.biombioe.2012.01.022">10.1016/j.biombioe.2012.01.022</a>. <a href="http://linkinghub.elsevier.com/retrieve/pii/S0961953412000232">http://linkinghub.elsevier.com/retrieve/pii/S0961953412000232</a>.</p>
<p>Kondili, E., C. C. Pantelides, and R. W H Sargent. 1993. A General Algorithm for Short-Term Scheduling of Batch Operations-I. MILP Formulation. <em>Computers and Chemical Engineering</em> 17 (2): 211227. doi:<a href="http://dx.doi.org/10.1016/0098-1354(93)80015-F">10.1016/0098-1354(93)80015-F</a>. <a href="http://www.sciencedirect.com/science/article/pii/009813549380015F">http://www.sciencedirect.com/science/article/pii/009813549380015F</a>.</p>
<p>Lejano, Raul P. 2006. Optimizing the Layout and Design of Branched Pipeline Water Distribution Systems. <em>Irrigation and Drainage Systems</em> 20 (1) (February): 125137. doi:<a href="http://dx.doi.org/10.1007/s10795-006-3140-4">10.1007/s10795-006-3140-4</a>. <a href="http://www.springerlink.com/index/10.1007/s10795-006-3140-4">http://www.springerlink.com/index/10.1007/s10795-006-3140-4</a>.</p>
<p>Li, Y. P., and G. H. Huang. 2006. An Inexact Two-Stage Mixed Integer Linear Programming Method for Solid Waste Management in the City of Regina. <em>Journal of Environmental Management</em> 81 (3) (November): 188209. doi:<a href="http://dx.doi.org/10.1016/j.jenvman.2005.10.007">10.1016/j.jenvman.2005.10.007</a>. <a href="http://www.ncbi.nlm.nih.gov/pubmed/16678336">http://www.ncbi.nlm.nih.gov/pubmed/16678336</a>.</p>
<p>Lim, Seong-Rin, Sangwon Suh, Jung-Hoon Kim, and Hung Suck Park. 2010. Urban Water Infrastructure Optimization to Reduce Environmental Impacts and Costs. <em>Journal of Environmental Management</em> 91 (3): 6307. doi:<a href="http://dx.doi.org/10.1016/j.jenvman.2009.09.026">10.1016/j.jenvman.2009.09.026</a>. <a href="http://www.sciencedirect.com/science/article/pii/S0301479709003302">http://www.sciencedirect.com/science/article/pii/S0301479709003302</a>.</p>
<p>Makropoulos, C. K., K. Natsis, S. Liu, K. Mittas, and D. Butler. 2008. Decision Support for Sustainable Option Selection in Integrated Urban Water Management. <em>Environmental Modelling and Software</em> 23 (12) (December): 14481460. doi:<a href="http://dx.doi.org/10.1016/j.envsoft.2008.04.010">10.1016/j.envsoft.2008.04.010</a>. <a href="http://linkinghub.elsevier.com/retrieve/pii/S1364815208000698">http://linkinghub.elsevier.com/retrieve/pii/S1364815208000698</a>.</p>
<p>Procter, Andrew C., P. <span></span>zge Kaplan, and Rochelle Araujo. 2015. Net Zero Fort Carson: Integrating Energy, Water, and Waste Strategies to Lower the Environmental Impact of a Military Base. <em>Journal of Industrial Ecology</em>. Blackwell Publishing. doi:<a href="http://dx.doi.org/10.1111/jiec.12359">10.1111/jiec.12359</a>.</p>
<p>Ravalde, Tom, and James Keirstead. 2015a. Comparing Performance Metrics for Multi-Resource Systems: The Case of Urban Metabolism. <em>Journal of Cleaner Production</em>. doi:<a href="http://dx.doi.org/10.1016/j.jclepro.2015.10.118">10.1016/j.jclepro.2015.10.118</a>. <a href="http://www.sciencedirect.com/science/article/pii/S0959652615015905">http://www.sciencedirect.com/science/article/pii/S0959652615015905</a>.</p>
<p>. 2015b. A Database to Facilitate a Process-Oriented Approach to Urban Metabolism. <em>Journal of Industrial Ecology</em> accepted (0) (May): 112. doi:<a href="http://dx.doi.org/10.1111/jiec.12429">10.1111/jiec.12429</a>. <a href="http://doi.wiley.com/10.1111/jiec.12429">http://doi.wiley.com/10.1111/jiec.12429</a>.</p>
<p>Williams, Hilary P. 1990. <em>Model Building in Mathematical Programming</em>. Vol. 4. A Wiley - Interscience Publication. Wiley.</p>
<p>Wolman, a. 1965. the Metabolism of Cities. <em>Scientific American</em> 213 (September): 179190. doi:<a href="http://dx.doi.org/10.1038/scientificamerican0965-178">10.1038/scientificamerican0965-178</a>. <a href="http://europepmc.org/abstract/MED/14338520">http://europepmc.org/abstract/MED/14338520</a>.</p>
<p>WorldBank. 2004. World Development Report. <em>Oxford University Press</em>. doi:<a href="http://dx.doi.org/10.1017/CBO9781107415324.004">10.1017/CBO9781107415324.004</a>. <a href="http://web.worldbank.org/WBSITE/EXTERNAL/EXTDEC/EXTRESEARCH/EXTWDRS/0,,contentMDK:23080183{~}pagePK:478093{~}piPK:477627{~}theSitePK:477624,00.html">http://web.worldbank.org/WBSITE/EXTERNAL/EXTDEC/EXTRESEARCH/EXTWDRS/0,,contentMDK:23080183{~}pagePK:478093{~}piPK:477627{~}theSitePK:477624,00.html</a>.</p>
<p>Zanganeh, a., and H. M. V. Samani. 2010. Optimisation of Water Networks Using Linear Programming. <em>Proceedings of the ICE - Water Management</em> 163 (9) (January): 475485. doi:<a href="http://dx.doi.org/10.1680/wama.2010.163.9.475">10.1680/wama.2010.163.9.475</a>. <a href="http://www.icevirtuallibrary.com/content/article/10.1680/wama.2010.163.9.475">http://www.icevirtuallibrary.com/content/article/10.1680/wama.2010.163.9.475</a>.</p>
<p>Zhang, Yan. 2013. Urban Metabolism: A Review of Research Methodologies. <em>Environmental Pollution</em> 178 (July): 46373. doi:<a href="http://dx.doi.org/10.1016/j.envpol.2013.03.052">10.1016/j.envpol.2013.03.052</a>. <a href="http://www.sciencedirect.com/science/article/pii/S0269749113001851">http://www.sciencedirect.com/science/article/pii/S0269749113001851</a>.</p>
<p>Zhang, Yan, Zhifeng Yang, and Xiangyi Yu. 2009. Evaluation of Urban Metabolism Based on Emergy Synthesis: A Case Study for Beijing (China). <em>Ecological Modelling</em> 220 (13-14) (July): 16901696. doi:<a href="http://dx.doi.org/10.1016/j.ecolmodel.2009.04.002">10.1016/j.ecolmodel.2009.04.002</a>. <a href="http://www.sciencedirect.com/science/article/pii/S0304380009002294">http://www.sciencedirect.com/science/article/pii/S0304380009002294</a>.</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Other applications of this model include [TODO: complete...]<a href="#fnref1"></a></p></li>
<li id="fn2"><p>The full search term is available at \url{http://www.scopus.com/results/results.uri?sort=r-f&amp;src=s&amp;sid=492559A18BFC5EDC7C12FF9547004CF1.fM4vPBipdL1BpirDq5Cw%3a100&amp;sot=a&amp;sdt=cl&amp;cluster=scosubjabbr%2c%22CHEM%22%2cf%2bscosubtype%2c%22ar%22%2ct%2bscosubjabbr%2c%22BIOC%22%2cf%2c%22MATE%22%2cf%2c%22PHYS%22%2cf%2c%22MEDI%22%2cf%2c%22IMMU%22%2cf%2c%22MATH%22%2cf%2c%22SOCI%22%2cf%2c%22ECON%22%2cf%2c%22PHAR%22%2cf%2c%22NURS%22%2cf%2c%22VETE%22%2cf%2c%22ARTS%22%2cf%2c%22HEAL%22%2cf%2c%22NEUR%22%2cf%2c%22PSYC%22%2cf%2c%22Undefined%22%2cf&amp;sessionSearchId=492559A18BFC5EDC7C12FF9547004CF1.fM4vPBipdL1BpirDq5Cw%3a100&amp;origin=savedSearchNewOnly&amp;txGid=492559A18BFC5EDC7C12FF9547004CF1.fM4vPBipdL1BpirDq5Cw%3a10}.<a href="#fnref2"></a></p></li>
<li id="fn3"><p>We started by removing common words (e.g. 'the') using the functionality of the textmining package <code>tm</code> in R, before identifying 11,967 unique words. From this automatically generated list, we manually removed words which did not refer to resources (e.g. 'network'), leaving 366 unique words. Only titles containing words from this list remained in our review. [TODO: add note on ]<a href="#fnref3"></a></p></li>
<li id="fn4"><p>For example, the potential energy of a mass of water due to its elevation is given by <span class="math">\(Energy head=mass \times gravity \times elevation\)</span>, and both mass and elevation can might be variables in a problem.<a href="#fnref4"></a></p></li>
<li id="fn5"><p>For example, 1 kg of static water at a 10 m elevation would have an energy head of 98.1 J. Thus <span class="math">\(X_{rq}\)</span> would be defined as <span class="math">\(X_{\mbox{water, mass}} = 1\)</span>, <span class="math">\(X_{\mbox{water, energy}} = 98.1\)</span>.<a href="#fnref5"></a></p></li>
<li id="fn6"><p>&quot;YAML ain't a markup language&quot;. This format is more human-readable than other heirarchical data storage formats approaches such as XML and JSON.<a href="#fnref6"></a></p></li>
<li id="fn7"><p>More detailed information regarding its location is confidential.]<a href="#fnref7"></a></p></li>
</ol>
</div>
</body>
</html>

# Literature review

[TODO: note the published components of this literature review]

The main aim of this thesis is to build a model which can assist planners and decision makers in improving the urban metabolism of an area, in order that the benefits of urbanisation can continue to be realised to the benefit of a growing urban global population, while reducing the environmental and economic threats they pose. With this in mind, this literature review has two main purposes: first, to identify the gaps in current research, and so to more precisely define the scope of this thesis; and second, to begin identifying methods which could be adopted in the modelling work.

The two main areas research fields addressed by this theses are urban metabolism (UM), and resource optimisation modelling (ROM). This chapter identifies the key ideas, concepts, principles and methods of these subject areas, beginning in Section [TODO:] showing how UM research has been used to better understand how cities use resources, and notes developments in UM research pertinent to this thesis. Section [TODO:] then introduces to the idea of 'modelling' in order to make the case that optimisation modelling can play a useful role in UM research, before Section [TODO:] looks in more detail at the types of models used in resource management modelling, in order to identify both the need for an integrated resource management model, and the methods by which such a model can be constructed. Once this survey of the literature has been completed, it is then possible to precisely define the scope [TODO: better word?] of this thesis, which is done by providing definitions of the words which comprise the thesis title, in Section [TODO:]. Finally, Section [TODO:] outlines [TODO: summarises?] the gaps and contributions met by this thesis.

This review first argues that the UM field should advance [TODO: foster, nuture, develop?] a more sophisticated understanding of how the resource management processes in a city affects its overall metabolism. Second, the review shows that urban resource optimisation modelling tends to only consider one resource sector in isolation (e.g. an urban energy system), and thus we argue for optimisation models which consider the simultaneous design of energy, water, and waste systems, i.e. 'integrated'. Nevertheless, there are sufficient precedent models to suggest that such a model can be both formulated, and applied. The rest of this thesis goes on to meet the first challenge by proposing that a city's management of goods and services can be modelled as an 'engineered system' (i.e., a network of processes which convert and transport resources). Notably, this understanding incorporates energy, water and waste management systems, and thus this thesis is placed to address the second challenge, by representing this engineered system using a set of equations which can form the basis of an optimisation model. In this way, this chapter lays the foundation to justify and contribute an optimisation tool which can help improve a city's metabolism.


```{r Setup, include=FALSE, results="hide", warning=FALSE}
opts_chunk$set(fig.path = "figures/", dev=c("pdf", "png"), fig.pos='htbp', fig.width=5, fig.height=1.6, dpi=700, fig.show='hold', fig.lp="fig:", cache=TRUE, par=TRUE, echo=FALSE, results="hide", message=FALSE, warning=FALSE)

#library(extrafont)
#font_import(pattern="LinBiolinum")

```

## The past, present and future of urban metabolism research

In this section, we introduce UM generally, before more specifically tracking the extent to which the role of resource management processes -- which will be shown to be an important consideration in this thesis -- have been considered in UM research.

In 1965, the American engineer Abel Wolman introduced 'urban metabolism'. Writing in *Scientific American* he defined the metabolic requirements of a city as "all the materials and commodities needed to sustain the city's inhabitants at home, at work and at play" [@Wolman1965, p.156]. He recognised that resource consumption was necessary to sustain urban living, but was motivated to study urban metabolism because of his concerns that as cities grow, their rising material and energy inputs and outputs were causing problems with water supply, sewage disposal and air pollution. At its most basic, an urban metabolism study will quantify the material and/or energy inputs and outputs of any given area -- Wolman did this for a hypothetical city of one million inhabitants [TODO: using government data?].

Since Wolman the UM concept has given rise to more sophisticated studies which seek to understand the scale and origins of urban consumption/waste, and its relationship to an area's form, geography, and other characteristics, and so more recently @Kennedy2007 has defined UM as "the sum total of the technical and socioeconomic processes that occur in cities, resulting in growth, production of energy and elimination of waste" (p.44). UM research has become closely associated with the notion of 'sustainability' [@Brutland1987], which includes three components as part of its so-called "triple bottom line", namely to maintain economic, social and environmental performance). Consequently, the UM concept has provided tools which help planners and policy makers improve urban sustainability, and is even employed by governments to help [TODO: finish and tidy sentence] (for example, in the United Kingdom, by @Clift2015).

<!--
its basic function is to highlight how cities can sustain their developing forms and socioeconomic functions, but with less harmful resource (forms, functions and flows). @Zhang2013's review mainly focuses on the flows ("research on urban metabolism therefore focuses on the sources and consumption of resources, and on their cycling within the system plus the emission, treatment, and recycling of wastes"). 
-->


As of 2011, there have been around 20 comprehensive UM studies of cities [@Kennedy2011] [TODO: update this figure in view of Kennedy et al. PNAS paper? More recently, a number of researchers from all over the globe have ]. The field has grown such that 'urban metabolism' is fast becoming a buzzword in urban research literature, perhaps enjoying the benefits of increased data availability in conjunction with "an explosion of research on cities and on sustainability in recent years" [@NextCity2014]. @Kennedy2012a write of the "substantial momentum" (p.781) to its study and highlight its usefulness to "address concerns over the magnitudes of global resource flows" as well as the "analysis of specific policy issues" (p.780). 

Typically, the methodology to conduct a UM study begins by defining a boundary around an urban area, and then consulting data sources in order to quantify material, energy, water and other resource flows into and out of a city on a yearly basis [@Kennedy2014] (more details on methodology are presented in Section [TODO:]). In practice therefore, a suitable definition of 'urban' is required. Definitions can range from defining an urban area in administrative termsÂ¸ or in terms of population density [TODO: is there a World Bank reference for this?]. However, urban metabolism studies care about resource flows, and from this perspective there are at least three ways to define an urban boundary, suggested by @Ramaswami2011 (from the point of view of quantifying a city's greenhouse gas emissions), and adapted by @Keirstead2012b:

- *Pure geographic* defines a boundary as the city's administrative boundaries;
- *Geographic-plus* extends the pure geographic definition to include readily traceable upstream flows, such as electricity consumption;
- *Pure consumption* attributes resource flows to the urban economy which generates a demand for a good or service. For example, a service-based city will require products manufactured in an industrial-based city. On the pure consumption definition, these flows would be attributed to the service-based city. This definition therefore attempts to 'even out' disparities between cities which arise from their different functions.

This thesis will adopt the 'geographic-plus' definition, for reasons outlined in Section [TODO:].

<!--
Studies of an area's metabolism can take a number of forms, focussing on the different elements of an urban system summarized by @Ravalde2016's hierarchical representation illustrated in Figure \ref{fig:metab}. Resource demand and waste generation at the bottom drives aggregate resource exchanges between a city and the environment at the top. In the middle, are the processes which convert and transport resources. We can use this representation, along with the 'top', 'middle' and 'bottom' terminology to outline the types of UM modelling that exist.

- Some work provides **top of system understanding** in the form of **accounting** exercises to quantify a city's resource flows at the top. The results of these can be used to to compare between cities(these results can also be used to calculate carbon footprint, ecological footprint and other metrics). [TODO: as in REFERENCE]. Or they can be used to related to other variables of interest [TODO: reference: e.g. water levels in Toronto]
- Elsewhere, UM studies seek to provide **top-bottom system understanding**, by relating such resource flows (or stocks) at the top to aspects of a city, building from the bottom up.
  	- @Ye2011: deterministically relates household construction characteristics to greenhouse gas emissions.
	- @Kellet2013 builds up emissions from building, transport, human, and vegetation sources.
	- @Baynes2012a: sectoral energy demand and upstream energy consumption
- Elsewhere, UM studies seek to provide **top-city system understanding**, by relating such resource flows (or stocks) at the top to aspects of a city such as resource flows at the top to socioecnomics, geography, urban form, etc. [TODO: add reference]. These could then be used to carry out scenario analysis, strategic planning
  	- @Liang214: statistically relates a city's quantity of steel stock with levels of nightime lighting
  	- @Fischer-Kowalski2004: society size and transport volume
	- @Fung2005: relates sustainability to instituational activities
	- @Hung2005: relates energy flows to urban development
  	- @Newman1999a: (theoretically) relates resource flows to urban form and 'livability'. 
- Elsewhere, UM studies seek to provide more **top-middle system understanding**, by relating such resource flows (or stocks) at the networks of processes in the middle (e.g. ENA) [TODO: add reference]. These could then be used to inform interventions, scenario analysis, strategic planning
  	- @Zhang2010: ENA to related resource flows of a city's 17 economic sectors to each other
- **middle-bottom system understanding**
  	- @Zeng2014: simulate water flows between the processes (e.g. water reclamation) and demands in an urban system, to show how demands under changing population scenarios
	- Similarly @Liang2011 resource consumption and waste emission objectives -- [TODO: leave, for now]
- Other (e.g. theory)

In coming to an understanding of **-middle** systems, some models choose to unite all resource flows under a single measures, such as @HUang2005 who use emergy. Others 
-->


A survey of the literature shows at least four ways the UM concept contributes to understanding urban sustainability.

- *To make comparisons of resource consumption.* For example, @Krausmann2008 compare the metabolism of agrarian, developing and industrialised societies. @Kennedy2007 narrows in on eight metropolitan regions around the world, examining their metabolisms since 1965 to show general trends of increasing per capita consumption of energy, water and waste (with some exceptions, such as Toronto's energy and water use). Comparisons might also take place between sectors within a single city (such as construction or commercial services), for example to determine which sectors produce the most waste [@Browne2009].
- *To provide inputs to other types of analysis.* UM studies compile annual inventories of resource flows, which can then be coupled to other data for further analysis.  For example, by combining urban metabolic data with carbon intensity factors, a city's greenhouse gas emissions can be calculated, as in @Kennedy2009 and @Kennedy2010. The 'ecological footprint' (EF) is another quantity that has been calculated from UM data [@BFF2002]. @Zucaro2014 use UM data to calculate 'urban sustainability indicators' for Rome, including carbon emissions, acidification and emergy flows.
- *To relate consumption/output to other dependent variables.* This includes identifying particular environmental problems with urban resource consumption such as waste generation impacts [@Browne2009]; water stress and contamination [@Kennedy2007]; and the degree to which economic growth is dependent on material consumption [@Schulz2007].
- *To understand or model relationships in the urban environment.* A more novel use of UM is to "develop mathematical models of processes within the urban metabolism" [@Kennedy2011, p.1970][^process-defn] in order to examine how policies or technological interventions might change stocks and flows. For example, from knowing the quantities of some of the material and energy flows into and out of processes within the urban environment, the STAN model of @Cencic2008 can be used to calculate the values of unknown process inputs and outputs. Another use is to explore relationships between different resources, with @Kenway2013 examining the links between urban energy and water consumption. Geographical dependencies can also be studied, for example @Barles2009 reveals Paris' reliance on surrounding regions for material provisions and waste management. @Bristow2013 assesses resilience and vulnerability of a city's resources, ascertaining whether or not Toronto has sufficient energy stocks in the event of supply failure or other shocks. Finally @Liu2011a have used UM inventory data to study the interdependence of economic sectors within a city.

[^process-defn]: Note that 'process' here refers generally to operations within an urban environment, rather than resource management technologies specifically.

In summary, as the environmental problems associated with urbanisation have increased, so urban metabolism has become an important tool, providing a frameword to examine resource consumption alongside notions of urban sustainability [@NextCity2014]. Specifically, urban metabolism studies can provide insight on how to maintain the socioeconomic benefits of urbanisation while limiting environmental harm. Studying it enables planners and policy makers to take stock of an area's resource consumption and output, ascertaining its long-term trends and comparing its own metabolism with other areas. The outcomes of studies can then inform policy analysis and urban design [@Kennedy2011].

Turning now to consider the components of UM in a little more detail, analysis of a city can focus on the different parts of an urban metabolic system, each of which work together in a hierarchical framework as shown in Figure \ref{fig:metab}. At the bottom lie end consumers, namely the homes, business, industry and transport that exert demands for final energy and water consumption, as well as generating wastes. At the top are the aggregate exchanges between a city and the surrounding environment: both the import of natural resources required to meet consumer demand, and the export of a city's wastes and effluents. In the middle is a network of processes that link the top and the bottom, converting natural resources to demands, as well as treating and managing locally generated wastes. Typically, urban metabolism studies seek to quantify the overall metabolic flows at the top, and to locate the origins of these flows at their point of demand at the bottom.

This section extends published arguments that advocate giving greater attention to the middle of the system, in order to show how the mix of processes used to meet demand at the bottom will affect overall metabolic inputs and outputs at the top.

\begin{figure}
	\centering
	\begin{spacing}{1.0}
	\sffamily
	\resizebox{\columnwidth}{!}{\input{04_database/metab-hierarchy.pdf_tex}}
	\end{spacing}
	\caption{Three components to an urban metabolism system with example resource flows adapted from the hypothetical city in \cite{Wolman1965}.}
	\label{fig:metab}
\end{figure}

### "Top-down"

According to @Chrysoulakis2014, most urban metabolism studies take a top-down approach. Their aim is to quantify the impacts of an entire urban area's consumption and waste generation [@Sahely2003]. Typically studies do this using data aggregated at the city scale (i.e. it cannot be traced back to particular locations or activities) [@Chrysoulakis2014]. Several methods are described in @Sahely2003. One example is Wolman's seminal study which derived a hypothetical city's resource flows from national rates of consumption (water, food and fuel) and generation (sewage, waste and air pollutants). A more sophisticated approach might adjust these values; for example, a city's food intake could be calculated by adjusting the national average food consumption according to a city's grocery bill expenditure (as suggested in Sahely et al.). Ideally though, data would be supplied directly from appropriate organisations: water consumption data from the public or private providers; electricity consumption data from market operators; and waste data from municipal authorities. Once collected, the data can be used to analyse trends and make inter-city comparisons, to reveal how variables (such as climate, urban form, economic activity etc.) correlate with overall metabolic flows, as exemplified by @Kennedy2015's study of megacities. Top-down studies can inform policy, as seen in @Liang2011 who use government statistics in a top-down metabolism study of Suzhou, China. Their findings lead to precise proposals to achieve decarbonization, in this case focussing CO$_2$ mitigation strategies on vehicle pollution (because trends indicate that the city is on course for low-carbon development in other sectors).

### "Bottom-up"

An alternative approach is to build up a picture of a city's metabolism from the bottom up, by quantifying resource flows at small scales before aggregating them over the region of study [@Chrysoulakis2009]. For example, @Kellett2013 describe a method to quantify a neighbourhood's CO$_2$ emissions by modelling the CO$_2$ flows in the neighbourhood's buildings, transport, humans, and vegetation components. For instance, to calculate the total emissions attributable to buildings, first building types are determined from architectural features (found from fieldwork, databases, and LiDAR information), enabling researchers to know the number of each building type of building in the neighbourhood; next the emissions for each type of building (such as an apartment) are estimated using a model which takes into account a building's occupancy, age and HVAC equipment. Finally, emissions for each building type can be multiplied by the prevalence of each building type to calculate total emissions.

Another bottom-up approach comes out of the Vulcan Project which measures CO$_2$ emissions at fine spatial and temporal resolutions, using networks of ground and air remote sensing technologies [@Asefi-Najafabady2014]. @Gurney2012 present results for the city of Indianapolis to understand the origins of its emissions, enabling decision makers to implement mitigation strategies, which are both effective and low cost.

Bottom-up methods often depend on high-tech tools including: sensor technology to measure energy, water, and pollutant fluxes; GIS and remote sensing devices to collect information on land-use, thermal radiance and rainfall; and advanced numerical modelling to simulate resource fluxes [@Chrysoulakis2009]. An alternative low-tech approach is to survey residents of a city about their resource use habits; for instance, deriving information on urban water flows by asking householders about their typical dishwasher loads and shower durations [@Eberlein2014].

### Merits, limitations, and a complementary approach

Top-down approaches are methodologically simple, but they do not nurture an appreciation of the ultimate causes of emissions or other environmental impacts [@Kellett2013], and are thus unable to predict how metabolic flows might change under different scenarios, hence the power of bottom-up methods which can be used to test scenarios and policies. Kellett et al. exemplify this in their neighbourhood emissions model by altering land-use, building efficiency, transport fuels, and consumer behaviour to observe how overall emissions change.

@Zhang2013 notes that both bottom-up and top-down approaches fail to consider the mechanisms within the urban system which determine its behaviour -- or as we have denoted it -- the *middle* of the system. The top-down approaches are well suited to identify the scale of metabolic problems, and the bottom-up approaches contribute understanding on the ultimate causes of problematic flows, but appreciation of the middle will add to the insights of bottom-up studies by revealing the role of a the internal mechanisms between the top and the bottom of an urban system. Thus Zhang argues research should prioritise quantitative analysis of an urban system's components, which models urban systems as a network of nodes and flows. This representation of a system provides a framework to understand how fluxes circulate between nodes, thus enabling researchers to test how management interventions and other scenarios will change the distribution of fluxes between nodes.

If these recommendations are to be realised, the urban metabolism field should seek a comprehensive understanding of what constitutes the middle to enable modelling to take place; i.e. identifying and describing the nodes and the links within metabolic networks. From an engineered-system perspective (as opposed to say an economic one), these nodes and links correspond to processes and resource flows, respectively (as per part (B) of Figure \ref{fig:metab}). Studying nodes and links could suggest how a city's mix of processes could meet resource demand in cheaper and greener ways, beyond demand-side management. As a case in point, consider how a city meets domestic heating demand: bottom-up studies could explore how measures such as thermal insulation and lower thermostat settings reduce fuel requirements at the top. But studying the middle would explore how investment in processes could reduce fuel usage, for example showing how how heat demand could be met by waste heat from power generation rather than gas boilers. We brand this type of analysis 'process-oriented'.

The evolution of UM research has been summarised by @Zhang2013. Starting with Wolman's seminal study, a city was understood as a system into and out of which resources flowed in a linear fashion. On this view, sustainability efforts are focussed on minimising the inputs and outputs. This representation was refined by @Giradet1990, who suggested that in addition to minimising resource inputs (e.g. by using solar energy and more efficient energy processes such as CHP), cities should be adopting circular metabolisms, whereby outputs could be reused as inputs through waste recycling. Both of these are black-box representations, where there is no consideration of mechanisms at play within the city. Thus @Zhang2009 proposed a network-process model in which research considers how resources move within a system. Specifically that work (and its offspring, such as @Li2011) considers the economic sectors (nodes) within a system, and the degree to which they are dependent upon one another by resource flows (links). Such information is useful to help identify potential problems for an urban system (e.g. due to sectors competing for a limited resource).

[TODO: reproduce @Zhang2013's figure]

The idea of looking at the mechanisms within a city has been extended by @Ravalde2016, who note that as well as understanding a city as a mix of economic sectors, it can also be understood as an engineered system. On this view, the system's nodes are resource management processes (e.g. powerplants and water treatment units), while the links are the flows between them. @Ravalde2016 argues that this enables the study of how a city's process mix, layout and scheduling can be optimised to maximise synergies, and thereby minimise a city's overall resource consumption and waste generation.
- Note @Procter2015

Another dimension to @Zhang's summary of UM research is to identify the purpose of UM studies under four methodologies: process analysis, which provides the theoretical basis (linear, circular and network, as discussed above); accounting and assessment, to quantify stocks and flows (perhaps using them to calculate performance indicators); simulation models, used to study dynamics, perhaps to see how a metabolism might change under various scenarios; and optimization and regulation, which seeks to improve a metabolism in relation to some objective through management interventions in the nodes and paths of a metabolic network. It is this last area which @Zhang identifies as a need for future research. 


Our introduction to UM thus far has been focussed on the resource flows into, out of and within urban areas. However, other studies attempt to integrate such studies of *flows* with the studies of cities spatial and material *forms* and/or their socioeconomic *functions*. 
- (urban political ecology, the central focus of https://www.bartlett.ucl.ac.uk/dpu/latest/publications/dpu-working-papers/WP168.pdf), 
- relationships with hinterlands and wider/global markets
- form ("such as distribution and density of housing, infrastructure etc.) influence MFA... who has access and who benefits from them..."
  	- @Barles2010a
- socioeconomic functions: @Newmann1999

- or they only focus on one resource, they are not intersectoral. Indeed, as @Fernandez-Mena2016 states the issue, UM models [TODO: note this was originally written in relation to nutrient recycling loops]
- Another author who has independently come to a similar conclusion is [TODO: citation].

> "... may seldom consider a whole mass balance since some flows are sometimes not quantified and do not always follow elements  along their whole cycle... The poor mechanistic basis underlying urban metabolism may prevent their use for exploring and simulating options for more efficient recycling loops within social ecological systems."

In summary, UM can be considered as the study of how a cities flows, forms and functions relate. While there is work to be done to study each of these areas (both individually, and how they relate), within the study of flows, the arguments of @Zhang2013 can be extended to highlight a need to study how the processes within a city relate to each other, as an engineered system. Furthermore, @Zhang2013 points out the need for optimisation studies. Thus our work in this paper (to formulate an optimisation model to take advantage of synergies between different resource management infrastructure) helps to meet this gap. In this way our work meets calls for IE perspectives on UM [@Clift2015] which (for example) identify future sustainable urban technologies.

## Modelling in the modern world

<!--
Jargon:

- Sets
- Parameters
- Constraints
- Objective (Cons and Obj are the mathematical relationships: equations, inequalities, logical relationships)
- Variables

Techniques:

- Linear, nonlinear, heuristics (e.g. GAs) etc.
- Map out linear/non-linear problems, and the solution approaches
- There should be a brief outline of this (even if it's just a list of definitions) so the when they are referred to in the literature review, the reader knows what we are talking about.
-->

The purpose of this section is to justify why we think that modelling will make a useful contribution to improving the urban metabolism of urban areas. Given the urban metabolism field has a strong heritage in accounting, trends, sustainability assessments, what would the modelling discipline bring to the table? It is important to justify a model whenever they are used, but it is also important here specifically, as we introduce a new type of modelling to the urban metabolism field, i.e. optimisation.

A model can be defines as "A simplified representation used to explain the workings of a real world system or even" [TODO: reference Wiktionary]. This can take a number of forms, summarised in Figure \ref{fig:models}, based on the @Williams1999's brief introduction to models. Either concrete (such as a scaled-down construction of an aeroplane [TODO: or lab-simulation of resource management process]), or abstract, which constitutes concepts [TODO: Wikipedia]. An abstract model could be purely descriptive, such that it might graphically/visually/diagramatically represent some system, but in our case, we will consider mathematical models, which use mathematical relationships to encode the behaviour of some real-world phenomenon. These relationships include equations, inequalities and logical dependencies. In our case, we will mathematically represent the processes which transport, store and transport goods and services to, from and within an urban area, and other features of the area. @Williams1999 highlights three benefits of building such models:

1. The act of model building itself will reveal relationhips that were previously unapparent.
2. The results my reveal courses of action which were otherwise unapparent.
3. One can experiment on a model in a way that may be impractical or unethical for a real system.

There are different types of mathematical models, including 'simulation models' which can be used to predict the performance of the real world system, and mathematical programming (also called optimization) models (our focus) which calculate the conditions under which a system will perform best [TODO: reference].

\begin{figure}
	\centering
	\begin{spacing}{1.0}
	\sffamily
	\resizebox{\columnwidth}{!}{\input{05_model-development/models.pdf_tex}}
	\end{spacing}
	\caption{A summary of different types of models, based on \citet[Chapter 1]{Williams1999}.}
	\label{fig:models}
\end{figure}

However, modelling is not without its critics, and we must address their objections to justify our use of mathematical programming to support measures to improve urban sustainability. Some only see crude reductionism in the way that mathematical programming seeks to quantify something, resting decisions on the numerical value of an equation. @Williams1999 points out that in fact all decisions will make quantitative evaluations implicitly, if not explicitly, and suggests modelling is at least honest and scientific. Others are sceptical of modelling, suggesting that innaccuracies in coefficient values will lead to inaccurate results. Williams responds by showing how models can be tested for a range of parameter values (to reflect uncertainty), for example establishing the ranges for which parameters can change with predictable effects on the values of variables and the objectives (for more detail on this, see lecture notes by Keirstead [TODO: Add reference]).

Having said that, we must not put blind, unquestioning faith in models, rather they "should be used as one of a number of tools for decision making" [@Williams1999, p5] to test different options, and identify what is possible. Thus, we propose mathematical programming (/optimisation modelling) as one tool alongside others within urban metabolism.

[TODO: In reality, this 'Why modelling' introduction will be longer, e.g. with examples, more references supporting the points. Especially, we'll record how models have been actually used within urban planning.]

In the remainder of this literature review, we will search the literature for examples of models used within resource management, within the energy, water and waste sectors. This will help us define the ambitions, expectations and capabilities of the model (the problems we want to solve), which in turn will help us define the mathematical formulation required to encode these problems. But first, we need to introduce some concepts, and definitions related to mathematical programming.

[TODO: note that the specifics of modelling are dealt with in detail in Chapter 5 as we demonstrate the development of the model]

## Review of resource managagement optimisation modelling

[TODO: locate this note somewhere]

Note that 'resource management optimisation modelling' is not a well-defined subject area (unlike say, 'urban energy systems modelling' [TODO: cite @Keirstead review paper definition], rather it is used here to refer generally to optimisation models which are used to assist system managers improve the management of an energy or material resource for which they are responsible. These include many of the models returned when using the search term [TODO: Scopus search term] in the Scopus database [TODO: more detail about Scopus]. Thus, this can incorporate everything from the efficient production of a single resource in some component of a plant [TODO: cite example], up to global strategies to manage [TODO: cite example, e.g. biomass] 

The management of urban resources requires networks of infrastructure to convert and transport resources to and thus efforts to improve sustainability often involve improving the design and operation of these infrastructure networks. One approach taken to such improvements is that of optimisation modelling, in which a resource allocation problem is represented by sets of equations which are then solved to select an optimal mix, layout, and operation schedule for resource management infrastructure [TODO: reference], such as water pipes [TODO: reference], waste transportation [TODO: reference], and power plants [TODO: reference].

However, as our literature review will show, urban resource optimisation modelling usually considers only one resource sector in isolation (e.g. an urban energy system). This approach fails to take advantage of the co-location of various resource management infrastructure, which makes possible synergies between different systems [TODO: reference], where the wastes and by-products of one process become the inputs to another (as seen in an energy-from-waste plant, for example). Thus current approaches to designing urban resource management systems impose a ceiling on potential material and energy savings.

As we have just argued, the field of UM modelling has space for a resource management process-based optimisation model. However if we narrow down our focus from a whole-metabolism perspective, to a single type of resource, there do exist optimisation models which plan the management of resources, usually in the form of a 'minimum cost flow problem', which is a type of network problem [@Williams1999, p81]. This type of model aims to minimise or maximise some quantity (e.g. profit from product manufacture), and is modelled by a set of linear and/or nonlinear equations whose variables represent choices (e.g. the presence and/or location of some process, or the quantity of a given product to be produced by a particular process, etc.), which can themselves by bounded by other equations representing real-world constraints (e.g. maximum daily machine output). Mathematical routines operate on the equations to choose the variable values which maximise a quantity of interest.

Optimisation models  models Scales: component to national/global

- MARKAL
- Domestic
- @Keedwell2006 (e.g. decision variables include water pipe dimensions)

Of most interest to use however, are the models formulated for the urban scale. One example from urban resource management is the urban energy system of @Keirstead2012. In one application, the model evaluates energy supply for a UK eco-town, focussing on the potential benefits of biomass-based systems[^Keirstead-other-applications]. A set of linear equations represent the resource quantities (e.g. biomass, heat, electricity, etc.) supplied to and removed from zones within the town at any given time. Parameters represent the zonal resource demands, resource availability, and technology behaviour. Variables represent whether a technology is present in a given zone, and at what rate is operates, as well as a schedule of resource movements within and without the city.

[^Keirstead-other-applications]: Other applications of this model include [TODO: complete...]

Optimisation models also are used for water supply networks. For example @Zanganeh2010's model optimises the performance of an area's existing water network, choosing reservoir heights, pump sizes. @Lejano2006 applies optimisation modelling to a network design, starting with the spatial distribution of customer demands, it selects appropriate locations for the pipes. Some water optimisation models have ambitions greater than merely meeting demand, but also seek to minimise freshwater consumption through employing water reclamation processes, water saving technologies. Examples of these can be found in @Lim2010 and @Makropoulos2008.

The idea that optimisation models can go beyond merely designing a minimum cost system, but also consider resource saving measures (as with some of the water models discussed above) is the idea behind our own model. Such considerations are also made in waste management planning optimisation models. For example, @Guo2009 optimises the allocation of waste flows from their point of generation to management facilities, to inform longterm investment decisions. (e.g. @Li2006).

The models above vary in their formulations, according to their different purposes. Moving from these specific examples, to consider the resource optimisation modelling more generally, we now conduct a quasi-systematic literature review to identify some of these characteristics in order to highlight both precedents and gaps for our model. We start by using Scopus to search for relevant literature, using the search term **energy AND water AND waste AND optimization model**, and excluding irrelevant subject areas (such as psychology) from the search [^search-res-models]. 

[^search-res-models]: The full search term is available at \\url{http://www.scopus.com/results/results.uri?sort=r-f&src=s&sid=492559A18BFC5EDC7C12FF9547004CF1.fM4vPBipdL1BpirDq5Cw%3a100&sot=a&sdt=cl&cluster=scosubjabbr%2c%22CHEM%22%2cf%2bscosubtype%2c%22ar%22%2ct%2bscosubjabbr%2c%22BIOC%22%2cf%2c%22MATE%22%2cf%2c%22PHYS%22%2cf%2c%22MEDI%22%2cf%2c%22IMMU%22%2cf%2c%22MATH%22%2cf%2c%22SOCI%22%2cf%2c%22ECON%22%2cf%2c%22PHAR%22%2cf%2c%22NURS%22%2cf%2c%22VETE%22%2cf%2c%22ARTS%22%2cf%2c%22HEAL%22%2cf%2c%22NEUR%22%2cf%2c%22PSYC%22%2cf%2c%22Undefined%22%2cf&sessionSearchId=492559A18BFC5EDC7C12FF9547004CF1.fM4vPBipdL1BpirDq5Cw%3a100&origin=savedSearchNewOnly&txGid=492559A18BFC5EDC7C12FF9547004CF1.fM4vPBipdL1BpirDq5Cw%3a10}.

```{r model-lit-review-load, results="asis"}

## Packages required by our analysis of the literature
library(tm)
library(dplyr)
library(ggplot2)
library(reshape2)

## Load in all titles
lit <- read.csv("02_lit-review/lit-resource-modelling.csv")
titles <- as.character(lit$Title) # The unedited paper titles

## Save number of files in original list (for output into document)
uncut_list_size <- dim(lit)[1]
uncut_list_size <- prettyNum(uncut_list_size, big.mark=",") # Insert a 1,000s comma separator
```

```{r model-lit-review-tm, results="asis"}

## Merge titles into single block of text
text_full <- paste(titles, collapse=" ")

## Edit the text for mining
text_source <- VectorSource(text_full)
corpus <- Corpus(text_source)
corpus <- tm_map(corpus, content_transformer(tolower))
corpus <- tm_map(corpus, removePunctuation)
corpus <- tm_map(corpus, stripWhitespace)
corpus <- tm_map(corpus, removeWords, stopwords("english"))

## Create the document-term matrix, and count word frequency
dtm <- DocumentTermMatrix(corpus)
dtm2 <- as.matrix(dtm)
frequency <- colSums(dtm2)
frequency <- sort(frequency, decreasing=TRUE)

## Create dataframe of word frequency
words <- names(frequency)
freq <- as.data.frame(frequency)$frequency
word_freq <- data.frame(words, freq) # 11,967 unique words in total

## Save word-frequency list for manual editing
write.csv(word_freq, "02_lit-review/words-pre-cut.csv", row.names=FALSE)
```

```{r model-lit-review-listReduction, results="asis"}

###--------------------------------------------------
### Manually reduce the list of words (removing those which don't refer to resources, e.g. 'network')
##### Original list: words-pre-cut.csv (11,967 unique words)
##### Reduced list: words-post-cut.csv (366 unique words)
### Manually categorise remaining words (e.g. "electricity" --> "energy"), and store in word-cats.csv
### Apply word-frequency analysis to identify:
##### (A) the number of word matches for each title
##### (B) the number of category matches for each title
### Plot and save results
###--------------------------------------------------

## Load manually-reduced database of word frequencies
word_freq_cut <- read.csv("02_lit-review/words-post-cut.csv")

```
[^unique-words]: This list of resources and their categories is supplied at [TODO: add URL].

```{r model-lit-review-categs, results="asis"}

## Load in categorisation of words
word_cats <- read.csv("02_lit-review/word-cats.csv") ## TODO: Remove the 'nonresource category'
```

```{r model-lit-review-categMatches, results="asis"}

## List of words to match
text_cut <- read.csv("02_lit-review/text_cut.csv")$word

## Set up vectors to store the results of the word-frequency analysis
T <- length(titles)
word_matches <- length(T)
cat_matches <- length(T)
cat_matches_list <- length(T)
optim <- rep(1, T)

## Loop over all titles, to identify the number of matching words
for(i in 1:T){

  ## Convert title into a vector where each word is a unique element
  title <- titles[i]
  title <- tolower(title) # Convert to lowercase
  title <- gsub("[[:punct:]]", " ", title) # Replace punctuation with spaces
  title <- unlist(strsplit(title, split=" ")) # Convert to vector

  ## For each title, count the number of words matching those in our list
  intersections <- intersect(title, text_cut)
  word_matches[i] <- length(intersections) ## a vector of how many matching words

  ## For each title, identify the number of unique categories containing the matched words
  categs <- filter(word_cats, words %in% intersections)

  ## For each title, count the number of unique categories containing the matched words
  cat_matches[i] <- length(unique(categs$category))

  ## For each title, list the unique categories containing the matched words
  categs_list <- as.character(sort(unique(categs$category)))
  categs_list <- paste(categs_list, sep="", collapse=", ")
  cat_matches_list[i] <- categs_list

  ## Identify the titles with 'optimi[s/z]ation', or similar
  optims <- match(c("optimization",
	  	 "optimisation",
	  	 "optimized",
	  	 "optimised",
	  	 "optimal"), title)

  if(all(is.na(optims)) == TRUE){
    optim[i] <- 0
  }

}

## Store results for each title in dataframe
title_matches <- data.frame(titles, word_matches, cat_matches, cat_matches_list, optim)
```

```{r model-lit-review-plot, results="asis"}
## Save titles and category matches (in original order)
write.csv(title_matches, "02_lit-review/title-matches-original-order.csv", row.names=FALSE)
```

```{r model-lit-review-optimReduction, results="asis"}

## As above, but just the titles containing 'optimization' and similar words
title_matches_optim <- filter(title_matches, optim==1)
write.csv(title_matches_optim, "02_lit-review/title-matches-optim-original-order.csv", row.names=FALSE)

## Save titles and category matches (sorted according to the frequency of category matches)
title_matches <- arrange(title_matches, desc(cat_matches))
write.csv(title_matches, "02_lit-review/title-matches.csv", row.names=FALSE)
```

```{r model-lit-review-categMatchFreq, results="asis"}

###--------------------------------------------------
### Make dot plot of category combinations in the literature
###--------------------------------------------------

## Get frequency of each combination of categories
combo_freqs <- data.frame(count(title_matches, cat_matches_list))
names(combo_freqs) <- c("Combinations", "CatFreq")

## Get frequency of 'optimization' within each category
optim_freqs <- title_matches %>% group_by(cat_matches_list) %>% summarize(sum(optim))
optim_freqs <- data.frame(optim_freqs)
names(optim_freqs) <- c("Combinations", "OptimFreq")

combo_freqs <- merge(combo_freqs, optim_freqs)

## Incorporate the number of categories for each combination (so plot can be faceted according to this)
tmp <- title_matches[!duplicated(title_matches$cat_matches_list), ]
tmp <- select(tmp, c(cat_matches_list, cat_matches))
names(tmp) <- c("Combinations", "n")
combo_freqs <- merge(combo_freqs, tmp)

## Create a column of titles (to be printed as facet_wrap strip titles)
combo_freqs$NumCats <- combo_freqs$n
combo_freqs[combo_freqs$n==0, ]$NumCats <- "Zero category matches"
combo_freqs[combo_freqs$n==1, ]$NumCats <- "One category match"
combo_freqs[combo_freqs$n==2, ]$NumCats <- "Two category matches"
combo_freqs[combo_freqs$n==3, ]$NumCats <- "Three category matches"
combo_freqs[combo_freqs$n==4, ]$NumCats <- "Four category matches"
combo_freqs[combo_freqs$n==5, ]$NumCats <- "Five category matches"

## Sort so number of categories will be faceted in ascending order
combo_freqs$NumCats <- factor(combo_freqs$NumCats,
			  levels= combo_freqs$NumCats[order(combo_freqs$n)])

## Sort so combination frequencies will be plotted in ascending order
combo_freqs$Combinations <- factor(combo_freqs$Combinations,
			  levels= combo_freqs$Combinations[order(combo_freqs$CatFreq)])

## Reshape so that CatFreq and OptimFreq can both be plotted as points
combo_freqs <- select(combo_freqs, -c(n))
combo_freqs <- melt(combo_freqs, id.vars=c("Combinations", "NumCats"), value.name="Frequency")
```

```{r model-lit-review-reduction, results="asis"}

###--------------------------------------------------
### POST-PROCESSING
### Copy title-matches-optim-original-order.csv --> title-matches-optim-original-order-edit.csv,
### (A) manually identify irrelevent papers with 'CUT'
### (B) assign a scale (e.g. 'domestic', 'regional' etc.) to each model
### (C) assign a level of integration ('none', 'integrated', or 'highly integrated') to each model
### This is so we can analyse the content of the remaining papers
###--------------------------------------------------

title_matches_edit <- read.csv("02_lit-review/title-matches-optim-original-order-edit-demands.csv")
lit <- title_matches_edit

## Only keep the relevant literature
lit <- filter(lit, notes.1!="CUT") ## 135 models remain

## Save number of files in reduced list (for output into document)
cut_list_size <- dim(lit)[1]
cut_list_size <- prettyNum(cut_list_size, big.mark=",") # Insert a 1,000s comma separator
```

This step returned `r uncut_list_size` results, which we filtered using R code to automatically remove titles not containing words related to 'optimization' [TODO: add footnote with URL], and titles unrelated to resource management[^filter-words]; before manually removing other irrelevant titles. This left `r cut_list_size` documents, which describe models at various scales (from optimising some component in a powerplant [TODO: example], to planning strategies at a regional level [TODO: example].

[^filter-words]: We started by removing common words (e.g. 'the') using the functionality of the textmining package `tm` in R, before identifying 11,967 unique words. From this automatically generated list, we manually removed words which did not refer to resources (e.g. 'network'), leaving 366 unique words. Only titles containing words from this list remained in our review. [TODO: add note on ]

[TODO: note difference between concrete (i.e. experimental) and abstract models.]

Across the different models, with their varying purposes, we could identify their various traits in order to highlight the need for our intersectoral synergy urban model, as well identify a suitable methodology to use. (Such excercises have been used elsewhere to identify modelling challenges and opportunities -- see for example the review of urban energy systems models in @Keirstead2012b.) There are many aspects we could consider (e.g. spatial and temporal resolution, time horizon, incorporation of endogenous resource demands, integration capabilities with other models, etc.), but here, we focus on three characteristics most relevant to our model, namely: the **detail** to which models make infrastructure design decisions; the **methods** used to solve the models; and the degree to which they integrate different resource management systems in order investigate synergies (**integration level**).

The most detailed models make 'low-level' decisions, optimising variables such as pipe dimensions and their precise location [TODO: water example], biomass moisture content in gasification [TODO: cite Synthesis and thermo-economic design optimization of wood-gasifier-SOFC systems for small scale applications]. At the high-level, the design is focussed on a system's superstructure, representing a system as a network of resource sinks and sources, and their connections between them. Often, their job is to identify optimal resource transfers between sinks and sources, to meet some goal. They may optimise a spatial layout (the location of, and distance between sinks and sources), but they do not go into the precision of detailed design. Examples include @Keirstead2012's urban energy system, the urban water system models of @Lim2010 and @Makropoulos2008, whose models maximise opportunities for wastewater reuse, by identifying urban sinks and sources of waters of various different contamination levels, and optimising how they might be connected. These high-level models are more likely to be used in research, or the early exploratory stages of a system design, whereas the low-level models are more likely to be used to generate precision needed to design and operate a system in the real world. Other characteristics which split across these 'design purposes', are the temporal horizon (not considered further in this paper), and the spatial scale (discussed below).

[TODO: note the biomass superstructure models for high-level.]
[TODO: note 'in-between' (medium-level) models?]
[TODO: note a difference between detail, and scale]

On solution methods to solve the optimisation which vary according to the formulation, of which there are two broad categories: linear and nonlinear. Linear models include many of the energy systems models (including @Keirstead2012), whic are based on mass or energy balances which can be linearly formulated [TODO: list examples from the spreadsheet]. There are subsets of linear problems, for example, some variables must take integer values (e.g. defining the number of a particular process in a location), and thus employ mixed-integer linear programming (MILP). Linear models can also have uncertain parameters, by defining them as probability distributions. This is especially true of waste management models, where long-term waste generation rates are uncertain. These stochastic linear models require multiple-stage methods to solve [TODO: list examples from the spreadsheet]. Nonlinear formulations are likely to be found in water management models. The first reason for this is that they many are based upon hydraulic equations which include the product of two or more variables[^hydraulic-vars], especially the case for the low-level modles [TODO: list examples from the spreadsheet]. But nonlinearity in the high-level superstructure models, in order to model water contamination levels, when different water/wastewater streams mix [TODO: list examples from the spreadsheet]. Nonlinear problems can be solved using the nonlinear programming methods [TODO: examples of NLP and MINLP], but these are computationally expensive, so heuristics are often used to obtain near-optimal solutions with less effort. These heuristics often start with a possible set of variable values, and the imitate processes in nature to modify these solutions until a near-optimal solution is found. Examples include genetic algorithms which follow evolutionary procedures [TODO: example]; and particle swarm optimisation, which mimic the flocking of birds [TODO: example].

[^hydraulic-vars]: For example, the potential energy of a mass of water due to its elevation is given by $Energy head=mass \times gravity \times elevation$, and both mass and elevation can might be variables in a problem.

Thirdly, we consider the extent to which models integrate different resource management systems, defining three levels. Each level indicates to what extent a model optimises intersectoral synergies, and are diagramatically represented in Figures [TODO: figure cross-refs].

\begin{description}
\item[None] These models consider just one resource system, such as the urban energy systems model of \citet{Keirstead2012}, or the urban water network model of \citet{@Keedwell2006}.
\item[Integrated] These models will optimise for one resource, but while considering other systems [TODO: examples]. While these models may identify synergetic opportunities, this is not their main purpose.
\item[Highly integrated] These models try to simultaneously meet the demands for more than one resource management system [TODO: for example]. These models have as their main purpose, the optimisation of synergies between different resource management systems.
\end{description}

Figure \ref{fig:model-integration}, shows which level of systems integration applies to each of the models in our review, for models at various scales.

```{r model-lit-review-categMatchPlot, fig.height=5, fig.cap="Model integration levels.\\label{fig:model-integration}"}

###--------------------------------------------------
### Plot overview of literature
###--------------------------------------------------


unique_levels <- unique(lit$level)
unique_cats <- unique(lit$cat_matches_list)
unique_optimised.systems <- unique(lit$optimised.system.s.)

## Sort so levels are plotted in ascending order
lit <- transform(lit,
		 scale=factor(scale,
		   levels=c("component",
			    "domestic", 
			    "plant",
			    "plant (multiple components)",
			    "plant (couple)",
			    "refinery/chem. plant",
			    "EIP",
			    "city",
			    "region",
			    "agricultural area",
			    "global",
			    "various"),
		    ordered=TRUE),
		 integration=factor(integration,
		    levels=c("none",
			    "integrated",
			    "highly integrated"),
		    ordered=TRUE),
		 cat_matches_list=factor(cat_matches_list,
		   levels=c("various, waste",
			   "various, water",
			   "waste, water",
			   "energy, various",
			   "energy, waste",
			   "energy, water",
			   "energy, various, waste",
			   "energy, various, water",
			   "energy, waste, water",
			   "energy, water, waste",
			   "various, waste, water",
			   "energy, various, waste, water"),
		    ordered=TRUE))

## Add column to colour the points within the site and the city regions
lit$colour <- "noColour"
lit[lit$Scale=="region", "colour"]  <- "colour"
lit[lit$Scale=="city", "colour"]  <- "colour"
lit[lit$Scale=="EIP", "colour"]  <- "colour"
lit[lit$Scale=="refinery/chem. plant", "colour"]  <- "colour"

## Plot as dot plot: integration vs. scale
plot_lit_int.scale <- ggplot(lit, aes(scale, integration)) +
#  geom_jitter(aes(colour=optimised.system.s.)) +
  geom_jitter(aes(colour=opt.systems.summary)) +
  xlab("Scale") +
  ylab("System integration") +
  theme_bw() +
  theme(axis.text.x = element_text(hjust=1, angle=30),
	legend.position = "bottom",
	legend.direction = "vertical") +
  guides(col=guide_legend(ncol=2))
plot_lit_int.scale

### Plot as dot plot: focus vs. methods
#plot_lit_focus.methods <- ggplot(lit, aes(optimised.system.s., methods)) +
#  geom_jitter(aes(colour=opt.systems.summary)) +
#  xlab("Optimised systems") +
#  ylab("Methods") +
#  theme_bw() +
#  theme(axis.text.x = element_text(hjust=1, angle=30),
#	legend.position = "bottom",
#	legend.direction = "vertical") +
#  guides(col=guide_legend(ncol=2))
#plot_lit_focus.methods

```

[TODO: note this reference "Optimization methods applied to the design of eco-industrial parks: A literature review" (review of literature (methods) where EIP's engage in the exchange of energy/materials/water (similar to our paper). Conclusions could be interesting).]

The focus of this research are the highly integrated models -- which presently -- are rare, though they do exist, particularly for refineiries and eco-industrial parks, to simultaneously optimze the management of multiple resource types exchanged between the processes in these entities [TODO: cite examples]. Examining these titles, it is clear that there are no models which address the opportunity to simultaneously plan energy, water, and waste management in order to improve an area's metabolism. The models to most closely meet these ambitions are for eco-industrial parks (**EIP**s), where models try to realise maximum benefit from IE possibilities, to identify the most beneficial energy and material exchanges between processes [TODO: cite an example?]. However, as the review article by @Boix2015 notes, these models emphasize "...either the water network, or the energy links or waste disposal facilities but never the whole networking" (p.314). Similarly at the city-scale, even dropping down a level to integrated models the focus tends to be on the integration of energy with some other system or integrating water networks into existing systems.

Considering how the dimensions of detail fit into our modelling aims, when considering multiple resource system types, it seems prudent to start with a simple representation of the various systems, before delving into the intricacies of the detail design and operation of the system, which require specialist expertise regarding the systems being modelled. This means looking to high-level model. In regards to the formulation, MILP methods provide control of the management processes used, the resource flows between them, and their corresponding transport links.

[NOTE: for thesis, methodology is still and open question at this point, hence thesis chapter on method.]

## Summary

As the UM framework is used to study urban sustainability, in relation to its resource flows, forms, and function, one developing area is consider the processes occurring inside a city more closely. One step towards this end, is to consider a city as an engineered-system, made up of a network of resource management processes, through which resources from beyond the city boundary are converted, in order to meet demand for energy, and water (similarly, the network manages wastes, and returns them to the wider environment). Such a network representation of a city's resource management leaves opens up the possibility of using optimisation modelling to design a model which can help researchers, planners and policy makers plan resource management to take advantages of the synergies between systems. If implemented, this model would minimise drawing from, and returning wastes to, the environment, and thereby improve an area's overall metabolism. Such a model would be high-level (rather than detailed), and its novelty lies in its highly-integrated consideration of energy, water, and waste resource management systems. The rest of this paper introduces the model, starting with its mathematical formulation, followed by an application to a case study.

[TODO: Bringing together the fields of urban metabolism, and resource optimisation modelling...]

[TODO: Advancing the frontier of optimisation modelling within IE from EIPs to urban areas as a whole...]

[TODO: given our aims are mainly focussed on UM, rather than detailed infrastructure design, then a highly integrated model is appropriate.]

<!--
In summary, optimisation modelling is used for many purposes to help plan resource management. However, our exhaustive search of the literature how shown that no models are appropriate to consider urban energy, water and waste management simultaneously, to realise synergistic benefits. Nevertheless, they do model multiple resource optimisation at suitable scales, to make the idea of such a model plausible (at least from an engineering point of view, if not one of free-market economics.

Lit review structure from JK's MILP paper.

- General decisions (discrete, continuous), linear, nonlienar, algorithms etc.
- Existing models (continue paragraph on small scale)
- Existing models (moving up the scale)
- Existing models (highest level)
- Example of a generic model
- Another example of a generic model
- Another example of a generic model
- Another example of a generic model
- Specific examples
- Summary of existing models
- Models with the most potential
- "The model presented in this paper has been developed to..." continue to understand the inside of the blackbox
-->

## Definitions

From our review of the literature, we are in a position to define the meaning of this thesis's title, as follows.

- *Integrated*: multiple resources/systems/infrastructure types  considered in the system, but only one being optimised for
- *Highly* integrated: multiple resources being optimised for in the synergistic system [TODO: note my triange/circle/square diagrams].
- *Urban*: geographic-plus, which allows for 'co-location' to refer to the proximity of infrastructure to *each other* (rather than the consumers/producers), which is what first and foremost facilitates synergies. It would be a shame to ignore a possibility, because the process was outside of the city.
- *Energy*, *Water*, *Waste*:
  
	- i.e. we do not include the manufacturing sector (e.g. demands for iron and steel, process industries etc.), but rather consider the resource demands common to the 'bottom level' (domestic, industrial, processing) for all city types -- resources which are often managed by public or private utility companies. Such an approach is somewhat arbitrary (and perhaps even limiting -- see Further Work, in Chapter 7), but it helps define the boundaries of our problem, and makes a manageable piece of work for this thesis.
	- Also, these are three of the "lifeline infrastructures" (http://ro.uow.edu.au/cgi/viewcontent.cgi?article=1053&context=isngi2013), and in particular the three which involve resource conversions
- *Resources*: [TODO: should this be changed to "systems"?]

Thus in other words [TODO: complete wordy explanation of the title], how can 

Other (non-title) definitions include:

- Low-, medium- and high-level
- Superstructure

## Gaps and contributions

Thus cities are an example of a multi-resource system [TODO: complete introductory sentances] 

- General challenges
	- A process-oriented approach to UM
	- An integrated optimisation model

- Specific challenges
  	- A metric for UM
  	- A database of processes
  	- A method for the model

In this paper, we formulate an optimisation model which meets demands for energy, water and waste management in such a way that it considers the potential synergies between these sectors, and thereby provide another UM-based tool which can help to improve the metabolism of a city. We proceed by reviewing current modelling approaches within UM and resource optimisation more generally, before formulating the model and demonstrating it on a Chinese urban development.

# Discussion and conclusions

\epigraph{``...when you close your eyes and imagine an epidemic spreading, or any other social dynamic, you are running some model or other. It is just an implicit model that you haven't written down...\par At least I can write mine down so that it can, in principle, be calibrated to data...\par The choice, then, is not whether to build models; it's whether to build explicit ones. In explicit models, assumptions are laid out in detail, so we can study exactly what they entail. On these assumptions, this sort of thing happens. When you alter the assumptions that is what happens. By writing explicit models, you let others replicate your results.''}{\citet{Epstein2008}}

In view of the growing urban populations
confronting environmental and economic challenges posed by the (otherwise desirable) phenomenon of urbanisation, 

To provide goods and services, cities are places of both great challenge and opportunities. In sustaining ever-growing populations in search of an improving quality of life, urban resource management needs are confronted by economic and environmental challenges. 

Our introduction showed that the energy, water and waste sectors interact, 
but in urban areas it is possible for these interactions to become synergies, by harnessing the co-location of infrastructure for 

Which gave rise to the research question

Reflecting upon the proximity of urban resource management processes in urban areas gave rise the idea of using the principles of industrial ecology at the urban level to improve UM as a whole. Looking to the ideas systems optimisation modelling in other sectors could proved a method to make this possible.
in adopting these principles of industrial ecology

The practical way forward for this:
- model - there complexity of identifying optimal process-mixes and operation schedules will increasingly require computational solutions.
- database

Optimisation modelling in general, and synergy-exploiting optimisation modelling is not far away from UM, and has been successfully applied in Industrial Ecology, especially as a means to integrate the operations of multiple facilities within Eco-Industrial Parks. This thesis has brought optimisation into the broader field


brought together urban metabolism, industrial ecology and optimisation modelling,

People have been using models to address complicated problems; to simplify complicated systems into ;


address the complexity of the problem with computational methods which use in effect quite easily understood equations, and datasets.

This work has been stated/formulated in terms of ‘urban metabolism’, since this is a research field which brings together various aspects of the study of urban areas in relation to their patterns of resource use, and thus provides an overarching framework, into which this work can speak and advance. 

This thesis has argued that to date, the UM has not yet sufficiently accounted for how an area's mix of resource management processes -- in this work, defined as the 'middle' of an urban system -- affects the aggregate exchanges of resources with the environment. 

This thesis has proposed that in view of the challenges posed by urbanisation, optimisation modelling should be adopted to help planners take advantage of intersectoral synergies. The model developed in this thesis achieved this by adding to the rliterature on resouce management, a generic MILP model at the urban scale which highly integrates the energy, water and waste management systems.

Related to this, this thesis has explored the best way to understand the efficiency of an area’s metabolism.

To that end, this thesis has added to the various extensions of UM's conceptual framework which began with @Wolman1965, and used this process-oriented model as the basis of a mathematical formulation of how resources are transferred between the derived demands of end-users, the network of processes which transport and convert resources, and area beyond the urban boundary. Using MILP methods, it is then possible to compute optimal 


However, a mere mathematical description of the middle of a system is not sufficient to explore these questions, and thus we assembled a database of over 300 processes which a city might use in its management of energy, water and waste, which provides data for the model.

## Summary

Chapter 1 highlighted the importance of cities, together with the challenges they face in resource management, but also identified the opportunities they have to exploit the co-location of infrastructure in order to harness synergies between the energy, water and waste management sectors using principles of industrial ecology. This introduction to themes came alongside an introduction to the concept which would govern much of the thinking behind this thesis, namely, the concept of urban metabolism -- a metaphor which provides the ideas and language to think through various aspects to urban sustainability. These motivations and themes led to the research question posed at the end of Chapter 1:

> *By how much can an area's metabolism be quantifiably improved by an optimisation model which integrates the planning of energy, water and waste systems?*

The first aim to answer this research questions was to *"Investigate the opportunity and methodology"*. Chapter 2 began this by conducting systematic literature reviews to explore how the UM field currently understands issues of urban resource management, and the ways in which optimisation modelling has been applied to urban resource management. This review led to the proposition that urban metabolism could be considered from the perspective of an engineered-system, which seeks to understand a city's aggregate metabolic flows as a function of the network of processes that manage and transport energy, water and waste. This was an extension to the conceptualisation of urban metabolism, which would subsequently enable the formulation of a mathematical model which could optimise flows of multiple resource types between management processes so that energy, water and waste systems could be considered in a highly integrated manner.

With a new conceptual model proposed, Chapters 3 showed how metabolism could be quantified by different metrics. Chapter 4 assembled a publicly-available dataset of energy, water and waste management processes which could be used to support the process-oriented UM studies (subsequently to provide data to the model). The content of both these chapters would subsequently to be useful in the modelling: the former would give methods which could quantify the extent to which the model could improve an area's metabolism; the latter would provide data to be used by the model.

With the groundwork laid, the second aim was to *"Develop a model which computes the optimal mix of resources to meet demand for goods and services"*. To that end, Chapter 5 extended an existing formulation for an urban energy systems model, to incorporate energy, water and waste resources and processes. A particular requirement of the model was *generality*, so that the model could deal multiple resource types in a usable and tractable way: Of three test formulations, the PRaQ method best achieved this, though the test case study has been made public as a benchmarking study, to facilitate future improvements of the formulation.

Finally, the third aim was to *"Assess how well the models improve urban metabolism"*. This was addressed in Chapter 6 by applying the PRaQ model to the ShannGu Power Company case study of an urban development in China. This demonstrated that a city's metabolism was indeed goverend by the engineered-systems at work in an area, by showing that optimal process mixes, and schedules of resource imports/exports, varied according to different design objectives and process availability.

[TODO: Add reference to https://metabolismofcities.org/page/about to chapter 4]

## Research contributions

\begin{table}[]
\centering
\caption{Summary of how this thesis answers the call for systems integration.}
\label{tab:summary-contributions-furtherWork}
\begin{tabular}{llp{3cm}p{4cm}}
\toprule
Chapter & Thesis aim & Contribution to field                                                                                                                                                                                & Further work                                                                                                                                                                                                                                                                                                                          \\
\midrule
2       & 1          & Conceptual model                                                                                                                                                                                     &                                                                                                                                                                                                                                                                                                                                       \\
3       & 1          & Assessed the ability of various ways to evaluate the efficiency of multi-resource systems (such as cities), to provide metrics which can be used to quantify the efficiency of an area's metabolism. & From Section \ref{sec:metrics-conclusions}: Confirm our conclusions regarding metrics with other UM datasets; perform grey-box analysis at a higher resolution, to quantify the trade-off between insights obtained and data required to obtain them; explore additional metrics; and apply this analysis to other types of multi-resource system. \\
4       & 1          & Open-source database providing quantitive information on behaviour of processes which manage energy, water and waste.                                                                                & From Section \ref{sec:database-conclusions}: Continuous improvement of the database (new processes, more information such as process costs, extend to other processes important to metabolism such as steel manufacture); developing the eco-system in which the database lives, so it can link to other opensource UM data.                        \\
5       & 2          & The PRaQ model formulation and benchmarking study which can be used to help further develop the formulation                                                                                          & From Section \ref{sec:model-dev-conclusion}: Continuous improvement of formulation and solutions, including piecewise linear and nonlinear formulations (requiring nonlinear models of the database processes), and heuristic-based solution methods such as genetic algorithms.                                                                    \\
6       & 3          & Demonstration that model can quantifiably improve UM                                                                                                                                                 & Case study: make input data more accurate and sophisticasted (e.g. demands); apply model at an operational level; investigate other objectives; further sensitivity analysis                                                                                                                                                             
\bottomrule
\end{tabular}
\end{table}

This thesis set out to respond to calls in the literature for cities to become more sustainable through more circular metabolism, achieved by using the wastes of one sector as the inputs to another -- in other words, developing highly integrated urban energy, water and waste systems. The contributions this thesis have made are summarised in Table \ref{tab:summary-contributions-furtherWork} and are enumerated with more detail below:

1. *Two smaller contributions.* Before considering the four main contributions of this thesis, it is worth mentioning two smaller contributions, which can be considered as 'by-products' of this research. The first is the review of the literature which makes up the urban metabolism research landscape, which encompassed the origins and purposes of UM studies, the way UM is conceptualised, the methods UM studies employ, and the models the field uses to understand the way components of UM systems relate to one another. The second smaller contribution is the systematic literature method used to gather infomraiton for the database in Chapter 4: this included filtering research according to quality, identifying relevant articles, and categorising articles according to resource type. These search and organisation methods might find useful application in urban metabolism and other fields.

2. *A new conceptual model of urban metabolism.* Since the first conceptual model of UM as a black-box was proposed by @Wolman1965, others have been developing the idea, to increase its explanatory power, for example with @Newmann1999 adding 'liveability' to the idea of resource flows. Other additions were proposed by @Giradet1990, who modelled the re-use of a city's outputs as inputs, to show how a city's overall resource throughput could be reduced. @Zhang2009a took the concept beyond the black box, by suggesting that  inside it was a network of economic sectors between which resources would be transferred. The main theoretical contribution of this thesis is to extend Zhang's network concept to include the *engineered processes* which convert and transport resources -- this model proposed the terms 'top', 'middle', and 'bottom' of a system to refer to an area's resource-management demands, the network of processes and resource flows which meet those demands, and the resulting aggregate metabolic flows into and out of an area, respectively. \\newline
  The power of conceptual models is that they provide the ideas and language to relate parts of real-world systems to one another in ways that allow people to think through the effects on a system when one or more parts change, whether that thinking stays at the conceptual level or is formalised mathematically. This thesis contributes a new way to conceptualise how energy, waste and waste management processes in the middle of a system affects the aggregate metabolic flows at the top of a system, as they are driven by demands at the bottom.

3. *The PRaQ model.* The theoretical contribution above then became practical, through the thesis' main methodological contribution -- the PRaQ model, which mathematically formalises the conceptual model, so it can be use to perform highly integrated systems optimisation on real-world problems, simultaneously meeting the demands of more than one system. Thus field of urban metabolism now has its own optimisation model, something previously only enjoyed by individual sectors, and thus arguably did not do much to in the way of metabolism as a whole. As such, this work adds another voice to the discussion on urban sustainability, by providing a tool which helps planners and policy makers take calls for systems integration and circular metabolism from idea to reality.

4. *Advice on how best to measure the efficiency of an area's metabolism.* To achieve efficient urban metabolisms by integrating multiple systems which use different resource types raises the question of how performance should be measured. In an energy system, this is fairly straightforward, because there is just one resource type. This problem of measurement gave rise to this thesis' third contribution: Chapter 3 classified a city as a multi-resource system which therefore exhibited the multi-resource trade-off problem, which could be addressed by black-box methods (such as water footprint and energy efficiency) or grey-box box methods (including exergy analysis and ecological network analysis). This work found that to answer the question of how well sectors work together is best answered by grey-box analysis.ENA also relates this contribution to @Zhang2009's work in that the engineered system's processes modelled by PRaQ each belong an economic sector, and so ENA provides management and economic implicaitons of  integrated systems. This contributions will inform decision makers the metrics to consider if they are to seek intersectoral synergies in urban planning. 

5. *Opensource database of resource conversion processes.* This final contribution adds to the growing suite of opensource tools for industrial ecology. Each record in the database uses YAML data to store information about the relative quantities or a process' inputs and outputs, and hence for use in PRaQ modelling.

In summary, the PRaQ model shows that the process-oriented perspective of UM is a fruitful avenue of research, which can now enable (as yet unexplored) possibility of optimisation modelling. Moreover, the *way* this thesis makes these contributions is designed to encourage research into this area. This thesis encourages use of PRaQ to continue, in particular through the growing community and opensource ecosystem within UM and IE [TODO: cite Davis etc.]. First, the opensource database of resource management processes for others to use in their own work. This database can be extended and edited by others, meaning the possibilities to study urban metabolism from a process-oriented perspective encouraged by this thesis' conceptual model can grow and grow. Second, by publishing PRaQ's formulation with a benchmarking problem, encourages future development of this work. Moreover, these open-sourced contributions can be used more broadly. Opensource tools form something akin to an 'ecosystem', rather than a static set of components. This means that uses of the benchmarking problem and database are not limited to those discussed here, but can be used in other work. This is further discussed in Section [TODO:].  With these contributions, the field of UM is better placed to answer questions about how cities can improve their metabolism through systems integration: planners, policymakers and decision makers now have the means to think about UM as a whole, rather than individual sectors as a part, in an objective and user-friendly way.

<!--
The idea of highly integrated urban resource management systems did raise questions about how the performance of multi-resource systems should be best quantified. Chapter 4's answer to this provides another theoretical contribution to advocate for grey-box metrics to understand what's going on inside a UM system. 

Turning to consider some specific ways this research may inform the future development of urban areas, the SPC case study offers a very early view of the way UM systems may develop in the future, as UM continues to become part of the sustainability discussion, and is therefore evermore incorporated into urban design [TODO: link to Kennedy's paper, and that blogpost]. The model opens up several avenues of exploration:

- the use of systems with more process types (particularly of a smaller capacity), in decentralised networks, rather than the more traditional centralised systems. Decentralisation is already happening within individual sectors (e.g. energy supply and water supply), so the SPC modelling results suggest that this can be coupled with advances in intersectoral synergies, with waste- and by-products cascading through a system [TODO: provide reference].
- The use of wildcard type modelling might inform best what new technologies are particularly worthy of further R&D, in order to fit best into existing systems. Research could.
- Furthermore, a city with a greater variety of processes could well be more flexible in responding to changing demands in resource-efficient ways.

- Hidden savings: don't forget that (unlike energy optimisation models), the water and waste flows for energy processes are considered!
-->


## Shortcomings and further work

<!--
Development of the PRaQ model can be seen as the coming together of four ideas: urban metabolism, industrial ecology, systems optimisation modelling, and open-source development. This thesis has focussed on introducing this collocation of ideas and how they might be applied. However, the focus has been upon introducing the idea, and thus some detail has been sacrificed for the sake of introducing a new idea to UM. Thus the early nature of this work means there is much more value to be squeezed out from the contributions of this thesis towards using PRaQ to improve urban metabolism.
-->

Some specific proposals for further work have been given in the concluding sections of Chapters 3, 4, 5 and 6. These have been summarised in Table \ref{tab:summary-contributions-furtherWork}. The further work of Chapters 4 and 5 (the additions to PRaQ, and the heuristic solutions to a nonlinear formulation), are enabled by the opensource contributions of this thesis (the Tat Hamlet benchmarking study, and the process database), thus helping the research community to develop and test formulation developments. In time, incremental contributions will hopefully lead to a process-oriented UM model and associated database that includes all the features desired by users, representing process behaviour with sufficient accuracy, and is tractable in suitable time-scales. Other proposals for further work are broader, and are considered in the following three subsections.

### The application of PRaQ

In addition to the suggestions at the end of Chapter 6 (modifications to the set of input processes, refinements to process and resource costs, operational activity (more timesteps), alternative objectives, and sensitivity analysis, there are a number of different ways PRaQ could be applied:
<!--
One consideration absent thus far is that of model validation, in other words, the question of how closely the model represents reality in practise. For many models, validation is a simple matter of comparing model results to experimental results. However, validation is not so easy for modelling at the urban scale. One possible way to validate PRaQ could be to apply it to existing urban areas for which sufficient information is known.

Not only would the area's demand profile need to be known (as is typical in PRaQ case studies), so would its process mix and layout -- the values of these variables [TODO: list them] would then be fixed, and the model run, to return a schedule of resource flows (both the aggregate metabolic exchanges into and out of the city, and the inter-process flows). It would then be possible to quantify how closely the modelled schedule matches that of real-life. This would be a major piece of work, and the first step would be to assemble the dataset for a real city.
-->

1. *Application to real cities.* Another use of real-city datasets would be to run PRaQ so as to inform how an existing city should change its processes over a given time horizon in view of constraints (e.g. budget and geography), changing demand patterns (e.g. electrification), and particular design objectives (e.g. minimising emissions). In these cases, some of the variables (some process choices and their operation schedule) would be fixed, while others are free to change (i.e. to represent the removal, replacement, or addition of new processes). This would require a very different set of input requirements, which are discussed in Section \ref{sec:further-work-community}.

2. *Testing resiliance to changes and shocks in demands .* A city may have changing demands over the long-term, or undergo sudden shocks of unusually high demand for a particular resource. PRaQ could be used to test with a current mix of processes is able to deliver goods and services under such conditions, by seeing how much a process mix needs to change in order to accommodate the new demand profile, or whether (ideally) the new demands could be met with the same process mix operating to a different schedule.

3. *Application at different time scales.* Other more simple applications of PRaQ could be to investigations at different temporal resolution. In going to greater time interval granularity, planners can investigate the effect of process *operation* on metabolism. In using larger time intervals (e.g. monthly, in which demands change each month over several years, perhaps corresponding to changing populations and demographics), planners can assess the long-term investment decisions which might improve an area's metabolism.

4. *Application at different spacial scales.* Scaling down the spatial resolution would enable PRaQ to consider the resource flows into and out of and within a buildings. This would require its own database of conversion and transport processes (such as sinks, water pipes, lavatories, electric heaters, compost bins etc.). Such modelling could be used to show how buildings can invest to reduce their overall consumption and waste. On the other hand, PRaQ could be scaled up to regional and national levels to investigate the chains of resource conversions over larger parts of an economy. This sort of modelling i to reduce the consumption and waste in regional resource transfers, and again, would require its own set of processes, perhaps including agriculture, livestock farming, forestry, etc.

5. *Extension beyong energy, water and waste sectors.*. Other sectors important to urban metabolism have not been considered, such as the manufacture of iron and steel manufacture. Introducing other sectors would be achieved by extending the database.

### The place of PRaQ within broader considerations

This thesis has been limited to considering the how the process mix in the middle of a system affects aggregate metabolic flows at the top. However, cities do not exist in a vacuum, free from other concernts. Cities cannot merely seen as nothing more than resource-managers. As the Introduction noted a city's primary value is socioeconomic. This brings with it all sort of considerations. Therefore future work should consider how PRaQ sits within broader socioeconomic systems. In the Chapter 6 case study, the modeller has complete control over energy, water, and waste management sectors.

Perhaps one reason for the lack of models which optimise integrated urban resource managment are the economic and market limitations. For example, energy, water and waste are typically managed separately, in which the operator of a single system (such as an energy supplier) might have such control, different resources are often managed by different actors, each seeking to maximise their own profits and incentives. PRaQ could therefore contribute to arguments which favour planned utilities management over management by purely liberalised markets. Perhaps PRaQ gives a basis to introduce incentives for various public and private utility companies to work together, helping cities to become more like EIPs in the management of resources. This debate happens to be ongoing with the current interest in Smart cities [TODO: reference].

Finally, PRaQ can be used in conjunction with other models[^link-type]. For example, there already exist models which optimise process use at a household level [TODO: cite example]. These could be used to define household demands, which could then be fed into PRaQ, to optimise resource flows at the urban scale. In the other direction, the overall metabolic exchange outputs of PRaQ could be used in regional or national input-output economic models [TODO: cite examples, e.g. Leontieff]. These examples essentially redefine the concept of the system middle to encompass lower-level and/or higher-level spatial representation. However, PRaQ can also link to the top and bottom of the system. Agent-based modelling can be used to define demands at the bottom of a system, deriving them from the activities a population participate in (e.g. shopping, educations, travelling, etc.), which are then fed into PRaQ. At the top of the system, the aggregate metabolic flows resulting from a process mix could be fed into environmental models, such as those which assess local emissions or hydrogolical conditions -- in this way, modellers can investigate the environmental impacts of a system's middle.

[TODO: Link to Bettencourt]

[^link-type]: Multiple models can either be soft-linked or hard-linked. In soft-linking, the models are run independently, with the results of one being manually fed to become the parameters of another. In hard-linked models, this transfer of one model's outputs to the others inputs is automated using code.

### The UM modelling community and platform {#sec:further-work-community}

This section has made several mentions the opensource contributions of this work, and indeed, the database has already been added to an online repository of opensource tools for industrial ecology and urban metabolism [TODO: Cite Chris Davis' GitHub repository] . This is such an opportunity for research and development, that it is worth devoting a subsection to how this aspect of the research can be developed, with a view to maximising enhancements to the formulation and application in useful research.

The simplest opensource development is to extend the @Ravalde2016, as this merely involves adding and editing the YAML files -- something that requires virtually no specialist knowledge, and nothing more than a text editor. However, the gains here are potentially large. Additions to the current processes include process costs (appropriate to specific locations, currencies, exchange rates, and purchasing power parities), spatial footprints, process type (i.e. domestic, commercial, municipal, or industrial). Other processes can be added, even outside the current types considered, for example to include industrial processes such as steel and cement manufacturing, and chemical production. Finally, all of the above, can be incorporated into the semantic web ecosystem (as outlined in Chapter 4), where database content links to structured and unstructured information, regarding the top, middle, and bottom of UM systems.

A second data contribution would be to collect data of existing cities (as discussed in Section [TODO: cross-reference]), to enable PRaQ to be applied to them. This would include the processes they use (i.e. their operating parameters), their geography, and their metabolic demands. This is a substantial project, and should begin with small examples, which show what others need to contribute.

Finally, the current proposals in this thesis are not yet truly open source, because the GAMS language compiler is propiertary. There do however exist examples of successful optimisation models coded in open source programming languages, for example, the Calliope energy systems model written in Python [TODO: reference]. The online repository of code and documentation makes an excellent example of what PRaQ could become[^callope].

[^callope]: \url{http://calliope.readthedocs.io/en/stable/}

## Summary

This thesis began with the premise that cities are vital, providing invaluable socioeconomic benefits to humanity, but at the same time, presenting significant environmental and economic challenges related to resource management. Cities, by their very nature, are well-placed to address some of these challenges because the co-location of processes can enable synergies between energy, water and waste management systems. In seeking to help bring these synergies from an idea to reality, this work has brought together ideas and methods from urban metabolism, industrial ecology, optimisation modelling, and the opensource community, to advance the theory of urban metabolism and develop a model which considers how *Highly integrated urban energy, water and waste resources* might benefit mankind, through harnessing intersectoral synergies which mean demand can be met in more environmentally and sustainable ways.

Models advance understanding of a system, by explicitly representing that system in a way that can be communicated and challenged -- an insight powerfully expressed by Professor Joshua Epstein in the epigraph above. The PRaQ model seeks to do that for a particular aspect of cities, namely integrated resource management. The PRaQ model proposed in this thesis begins to serve this purpose. There is of course still someway to go, and to that end the developments suggested above (as well as developments others will offer) will further advance the place of modelling solutions to how energy, water and waste sectors might work better together.

In an increasingly resource-constrained world which faces the challenges of population growth, global warming, water scarcity, shrinking landfill capacity and other challenges, cities are being hailed as the most efficient means to provide goods and services. It is imperative that reasoned-out approaches are used to help the world become more economically and environmentally sustainable. It is with this in mind that this thesis has been written.
